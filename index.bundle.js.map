{"version":3,"file":"index.bundle.js","mappings":"uBAAIA,E,iECGAC,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,mGAMrC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,kCAAkC,MAAQ,GAAG,SAAW,iEAAiE,eAAiB,CAAC,oGAAoG,WAAa,MAE3RH,EAAwBI,OAAS,CAChC,cAAe,eAEhB,S,gECbIJ,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,qGAMrC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,oDAAoD,MAAQ,GAAG,SAAW,iEAAiE,eAAiB,CAAC,sGAAsG,WAAa,MAE/SH,EAAwBI,OAAS,CAChC,gBAAiB,iBAElB,S,gECbIJ,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,m9BA4DtC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,yDAAyD,MAAQ,GAAG,SAAW,4eAA4e,eAAiB,CAAC,o9BAAo9B,WAAa,MAE5kDH,EAAwBI,OAAS,CAChC,OAAU,SACV,aAAc,aACd,iBAAkB,iBAClB,wBAAyB,wBACzB,KAAQ,OACR,wBAAyB,wBACzB,OAAU,UAEX,S,0JCjEIC,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,IAAQD,QAAS,IAAQA,O,sBCDnD,SAASO,GAAgB,UAAEC,EAAS,eAAEC,EAAc,UAAEC,EAAS,kBAAEC,EAAiB,kBAAEC,EAAiB,MAAEC,EAAQ,MAClH,OA1BkDC,EA0BjCC,KA1B0CC,OA0BpC,EA1BmDC,EA0BnC,YACnC,MAAMC,EAAST,EAAeU,KAAI,CAACC,EAAeC,IAjB1D,SAAkCD,EAAeC,EAAQb,GACrD,MAAMU,EAAS,CAAC,EAChB,IAAK,IAAII,EAAI,EAAGA,EAAI,EAAGA,IACnBJ,EAAO,GAAGE,IAAgBE,KAAO,CAC7BC,MAAO,CACHC,EAAGF,EAAId,EAAUiB,MACjBC,EAAGL,EAASb,EAAUmB,OACtBC,EAAGpB,EAAUiB,MACbI,EAAGrB,EAAUmB,QAEjBG,WAAY,CAAEF,EAAGpB,EAAUiB,MAAOI,EAAGrB,EAAUmB,SAGvD,OAAOT,CACX,CAGqEa,CAAyBX,EAAeC,EAAQb,KACvGwB,EAAa,CACfd,OAAQe,OAAOC,OAAO,CAAC,KAAMhB,GAC7BiB,KAAM,CACFtB,SAEJuB,WAAYlB,EAAOmB,QAAO,CAACC,EAAKC,EAAiBjB,KAC7CgB,EAAI7B,EAAea,IAAMW,OAAOO,KAAKD,GAC9BD,IACR,CAAC,IAGFG,EAAc,IAAI,MAAY,MAAYC,KAAKhC,GAAYsB,SAE3DS,EAAYE,QAClB,MAAMC,EAAY,IAAI,MA6BtB,OAnBAA,EAAUC,gBATezB,IACrBwB,EAAUE,SAASC,OAAS,GAAKH,EAAUI,cAAc,GACzD,MAAMC,EAAiB,IAAI,MAAeR,EAAYL,WAAWhB,IACjEwB,EAAUM,SAASD,GACfrC,IACAqB,OAAOC,OAAOe,EAAgBrC,EAAkB,KAAMA,EAAkBQ,KACvE6B,aAAuD,EAASA,EAAeE,WAAaF,EAAeG,OAChH,EAGJR,EAAUH,YAAcA,EACxBG,EAAUQ,KAAO,KAAQ,IAAIC,EAAI,OAAwC,QAAhCA,EAAKT,EAAUE,SAAS,UAAuB,IAAPO,OAAgB,EAASA,EAAGD,MAAM,EACnHR,EAAUU,UAAY,KAClB,MAAMC,EAASX,EAAUE,SAAS,GAClCS,EAAOC,aACHD,EAAOC,aAAe,GAAKD,EAAOE,YAC5B,EACAF,EAAOC,aAAe,CAAC,EAErCZ,EAAUc,UAAY,KAClB,MAAMH,EAASX,EAAUE,SAAS,GAClCS,EAAOC,aACHD,EAAOC,aAAe,EAAI,EACpBD,EAAOE,YACPF,EAAOC,aAAe,CAAC,EAGrCZ,EAAUC,gBAAgBlC,GACnBiC,CACX,EAtEO,KAFgEe,OA0BxC,KAxBbA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKhD,EAAUiD,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKhD,EAAiB,MAAE+C,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMhD,EAAYA,EAAUuD,MAAM1D,EAASE,GAAc,KAAKkD,OAClE,IAPwC,IAAUpD,EAASE,EAAY2C,EAAG1C,CAyE9E,CCzEO,MAAMwD,EAAW,ICAjB,IAAIC,GACX,SAAWA,GACPA,EAASA,EAAgB,MAAI,GAAK,QAClCA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAe,KAAI,GAAK,MACpC,CAJD,CAIGA,IAAaA,EAAW,CAAC,ICUrB,MAAMC,UAAkB,MAC3B,WAAAC,CAAYzD,EAAK0D,GACbC,QACA/D,KAAKI,IAAMA,EACXJ,KAAK8D,IAAMA,EACX9D,KAAKgE,KAAO,YACZhE,KAAKiE,OAAS,EACdjE,KAAKkE,MAAQ,CACjB,CACA,IAAAC,GACI,OAzB8CpE,EAyB7BC,KAzBsCC,OAyBhC,EAzB+CC,EAyB/B,YACnCF,KAAK6B,gBAAkBrC,EAAgB,CACnCC,UAAW,CAAEiB,MAAO,IAAKE,OAAQ,KACjCjB,UAAW,8BACXD,eAAgB,CACZ,YACA,UACA,YACA,aACA,QAEJE,kBAAmB,OACnBC,kBAAmB,CACf,IAAK,CACDuE,eAAgB,MAChBC,MAAM,EACNjC,UAAU,GAEdkC,KAAM,CACFlC,UAAU,EACVgC,eAAgB,QAGxBtE,MAAO,QAEXE,KAAKmC,SAASnC,KAAK6B,WAInB7B,KAAK6B,UAAUpB,GAAKiD,EAAW1D,KAAKU,OAAS,EAC7CV,KAAKuE,cACLvE,KAAK8D,IAAIU,OAAOC,IAAIzE,KAAK0E,OAAOC,KAAK3E,MACzC,EAvDG,KAFgE4C,OAyBpC,KAvBjBA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKhD,EAAUiD,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKhD,EAAiB,MAAE+C,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMhD,EAAYA,EAAUuD,MAAM1D,EAASE,GAAc,KAAKkD,OAClE,IAPwC,IAAUpD,EAASE,EAAY2C,EAAG1C,CA0D1E,CACA,OAAA0E,GACIb,MAAMa,UACN5E,KAAK8D,IAAIU,OAAOK,OAAO7E,KAAK0E,OAAOC,KAAK3E,MAC5C,CACA,MAAA0E,CAAOI,GACH,GAAK9E,KAAK+E,cAGV,OAAQ/E,KAAK+E,eACT,IAAK,KACD/E,KAAKgF,KAAK,EAAGhF,KAAKkE,MAAQY,GAC1B,MACJ,IAAK,OACD9E,KAAKgF,KAAK,GAAIhF,KAAKkE,MAAQY,GAC3B,MACJ,IAAK,OACD9E,KAAKgF,KAAKhF,KAAKkE,MAAQY,EAAO,GAC9B,MACJ,IAAK,QACD9E,KAAKgF,MAAMhF,KAAKkE,MAAQY,EAAO,GAG3C,CAEA,IAAAE,CAAKC,EAAQC,GAGT,MAAMC,EAAkB,CACpB1E,EAAGT,KAAKS,GAAc,EAAVwE,EACZtE,EAAGX,KAAKW,GAAc,EAAVuE,GAEZlF,KAAKoF,iBAAiBD,EAAiBF,EAAQC,GAC/ClF,KAAKuE,eAGLvE,KAAKS,EAAI0E,EAAgB1E,EACzBT,KAAKW,EAAIwE,EAAgBxE,EAEzBX,KAAKiE,OAASoB,KAAKC,MAAMH,EAAgBxE,EAAI+C,GAC7C1D,KAAKI,IAAImF,UAAU5E,GAAKuE,EACxBlF,KAAKI,IAAImF,UAAU9E,GAAKwE,EAEhC,CACA,gBAAAG,CAAiBD,EAAiBF,EAAQC,GAEtC,MAAMM,EAAyBH,KAAKI,MAAMzF,KAAKS,EAAIiD,KAC/C2B,KAAKI,OAAOzF,KAAKS,EAAIT,KAAKU,OAASgD,GACjCgC,EAA2BL,KAAKI,MAAMzF,KAAKW,EAAI+C,KACjD2B,KAAKI,OAAOzF,KAAKW,EAAIX,KAAKY,QAAU8C,GAClCiC,EAAe,GAqDrB,OAnDIT,EAAS,GAaJA,EAAS,GAZdS,EAAa7G,KAAK,CACd2B,EAAG4E,KAAKI,OAAON,EAAgB1E,EAlGjB,IAkG8CiD,GAC5D/C,EAAG0E,KAAKO,MAAMT,EAAgBxE,EAAIX,KAAKY,OAAS,GAAK8C,KAErD8B,GACAG,EAAa7G,KAAK,CACd2B,EAAG4E,KAAKI,OAAON,EAAgB1E,EAAIT,KAAKU,OAASgD,GACjD/C,EAAG0E,KAAKO,MAAMT,EAAgBxE,EAAIX,KAAKY,OAAS,GAAK8C,MAkBxDuB,EAAS,GACdU,EAAa7G,KAAK,CACd2B,EAAG4E,KAAKI,OAAON,EAAgB1E,EA5HjB,IA4H8CiD,GAC5D/C,EAAG0E,KAAKO,MAAMT,EAAgBxE,EAAIX,KAAKY,OAAS,GAAK8C,KAErDgC,GACAC,EAAa7G,KAAK,CACd2B,EAAG4E,KAAKI,OAAON,EAAgB1E,EAjIrB,IAiIkDiD,GAC5D/C,EAAG0E,KAAKO,MAAMT,EAAgBxE,EAAIX,KAAKY,OAAS,GAAK8C,MAKxDuB,EAAS,IACdU,EAAa7G,KAAK,CACd2B,EAAG4E,KAAKI,OAAON,EAAgB1E,EAAIT,KAAKU,OAASgD,GACjD/C,EAAG0E,KAAKO,MAAMT,EAAgBxE,EAAIX,KAAKY,OAAS,GAAK8C,KAErDgC,GACAC,EAAa7G,KAAK,CACd2B,EAAG4E,KAAKI,OAAON,EAAgB1E,EAAIT,KAAKU,OAASgD,GACjD/C,EAAG0E,KAAKO,MAAMT,EAAgBxE,EAAIX,KAAKY,OAAS,GAAK8C,MAI1DiC,EAAaE,MAAMC,IACtB,MAAMC,EAAO/F,KAAKI,IAAI4F,MAAMC,MAAMF,GAASA,EAAKtF,IAAMqF,EAAOrF,GAAKsF,EAAKpF,IAAMmF,EAAOnF,GAAKoF,EAAKG,QAC9F,QAAKH,IAIDA,EAAK/B,OAASL,EAASwC,OAEtBJ,EAAKK,WAAWC,SAASC,SAAS,aAE/BP,EAAKK,WAAWC,SAASC,SAAS,kBAET,eAA7BP,EAAKK,WAAWC,SAETlB,EAAgB1E,EAAIsF,EAAKtF,EAAIiD,EAAW,GAE5CqC,EAAKG,MAAK,GAEzB,CAIA,IAAAK,CAAKC,GAEGxG,KAAK+E,gBAAkByB,IAI3BxG,KAAKuE,cAELvE,KAAK+E,cAAgByB,EAErBxG,KAAK6B,UAAUC,gBAAgB,QAAQ0E,KAC3C,CAIA,WAAAjC,GACIvE,KAAK+E,mBAAgB0B,EAErBzG,KAAK6B,UAAUC,gBAAgB,OACnC,EC1MG,SAAS4E,EAAOC,EAAKC,GACxB,OAAOvB,KAAKI,MAAMJ,KAAKqB,UAAYE,EAAMD,EAAM,IAAMA,CACzD,CCFA,ICCIE,EDwIJ,SAASC,EAAoBrG,EAAGE,EAAGqF,GAC/B,MAAMe,EAAmB,CACrBC,SAAKP,EACLQ,YAAQR,EACRS,UAAMT,EACNU,WAAOV,EACPW,UAAMX,GAsBV,OApBAT,EAAMqB,SAAStB,IACPA,EAAK/B,OAASL,EAASwC,MAAQJ,EAAK/B,OAASL,EAAS2D,OAGtDvB,EAAKtF,IAAMA,GAAKsF,EAAKpF,IAAMA,IAC3BoG,EAAiBK,KAAOrB,GAExBA,EAAKtF,IAAMA,EAAI,GAAKsF,EAAKpF,IAAMA,IAC/BoG,EAAiBG,KAAOnB,GAExBA,EAAKtF,IAAMA,EAAI,GAAKsF,EAAKpF,IAAMA,IAC/BoG,EAAiBI,MAAQpB,GAEzBA,EAAKtF,IAAMA,GAAKsF,EAAKpF,IAAMA,EAAI,IAC/BoG,EAAiBC,IAAMjB,GAEvBA,EAAKtF,IAAMA,GAAKsF,EAAKpF,IAAMA,EAAI,IAC/BoG,EAAiBE,OAASlB,GAC9B,IAEGgB,CACX,CACA,SAASQ,GAAc,EAAE9G,EAAC,EAAEE,GAAKqF,GAC7B,IAAI1D,EAAIkF,EAAIC,EAAIC,EAAIC,EACpB,MAAMZ,EAAmBD,EAAoBrG,EAAGE,EAAGqF,GAC7C4B,EAAwG,QAAzFJ,EAAqC,QAA/BlF,EAAKyE,EAAiBC,WAAwB,IAAP1E,OAAgB,EAASA,EAAG8D,kBAA+B,IAAPoB,OAAgB,EAASA,EAAGnB,SAC5IwB,EAA0G,QAA1FH,EAAsC,QAAhCD,EAAKV,EAAiBK,YAAyB,IAAPK,OAAgB,EAASA,EAAGrB,kBAA+B,IAAPsB,OAAgB,EAASA,EAAGrB,SACpJ,OAAsC,QAAhCsB,EAAKZ,EAAiBK,YAAyB,IAAPO,OAAgB,EAASA,EAAG3D,QAAUL,EAAS2D,OACxFO,aAAmD,EAASA,EAAavB,SAAS,WAC5E,QAEPS,EAAiBK,OACXQ,aAAiD,EAASA,EAAYtB,SAAS,gBAAkC,eAAhBsB,GACnF,mCAAhBA,EAIO,oBAHA,sBAMXb,EAAiBC,OACfY,aAAiD,EAASA,EAAYtB,SAAS,gBAC7ES,EAAiBC,IAAIhD,OAASL,EAAS2D,MAEvB,gCAAhBM,EACO,wBAEJ,mBAEJ,OACX,CACA,SAASE,GAAa,EAAErH,EAAC,EAAEE,GAAKqF,GAC5B,IAAI1D,EACJ,MAAMyE,EAAmBD,EAAoBrG,EAAGE,EAAGqF,GAEnD,GAAIe,EAAiBG,MAAQH,EAAiBI,MAAO,CACjD,GAAIJ,EAAiBE,OACjB,MAAO,eAKX,GAAqB,4BAFA,QADC3E,EAAKyE,EAAiBG,KACvCd,kBAA+B,IAAP9D,OAAgB,EAASA,EAAG+D,UAGrD,MAAO,0BAGX,MAAM0B,IAAe/B,EAAMC,MAAM+B,GAAMjB,EAAiBI,MAAM1G,EAAI,IAAMuH,EAAEvH,GACtEsG,EAAiBI,MAAMxG,IAAMqH,EAAErH,GAC/BqH,EAAEhE,OAASL,EAASwC,OAExB,OAAIY,EAAiBI,MAAMnD,OAASL,EAASwC,MACzC4B,GACiB,IAAjBrB,EAAO,EAAG,GACH,yBAEJ,YACX,CACA,OAAIK,EAAiBC,KAAOD,EAAiBE,OACrCF,EAAiBI,MACV,aAEJ,WAGPJ,EAAiBG,KACbH,EAAiBE,OACV,iCAEFF,EAAiBC,IACf,8BAEJ,mBAGPD,EAAiBI,MACbJ,EAAiBE,OACV,gCAEFF,EAAiBC,IACf,6BAEJ,kBAGPD,EAAiBC,IACV,kBAGPD,EAAiBE,OACV,eAGJ,QACX,EChQA,SAAWJ,GACPA,EAAUA,EAAiB,MAAI,GAAK,QACpCA,EAAUA,EAAgB,KAAI,GAAK,OACnCA,EAAUA,EAAiB,MAAI,GAAK,QACpCA,EAAUA,EAAgB,KAAI,GAAK,MACtC,CALD,CAKGA,IAAcA,EAAY,CAAC,IAW9B,SAASoB,EAAiBC,EAAO1B,GAC7B,OAAQA,GAEJ,KAAKK,EAAUsB,MACX,OAAOD,EAAM5G,QAAO,CAAC8G,EAAMC,IACnBA,EAAK1H,EAAIyH,EAAKzH,EACP0H,EAEJD,IAGf,KAAKvB,EAAUyB,KACX,OAAOJ,EAAM5G,QAAO,CAAC8G,EAAMC,IACnBA,EAAK5H,EAAI2H,EAAK3H,EACP4H,EAEJD,IAGf,KAAKvB,EAAU0B,MACX,OAAOL,EAAM5G,QAAO,CAAC8G,EAAMC,IACnBA,EAAK1H,EAAIyH,EAAKzH,EACP0H,EAEJD,IAGf,KAAKvB,EAAU2B,KACX,OAAON,EAAM5G,QAAO,CAAC8G,EAAMC,IACnBA,EAAK5H,EAAI2H,EAAK3H,EACP4H,EAEJD,IAGvB,CAEA,SAASK,EAAWC,EAAOC,GACvB,OAAOjC,EAAOrB,KAAKuB,IAAI8B,EAAMjI,EAAI,EAAGkI,EAAMlI,EAAI,GAC9C4E,KAAKsB,IAAI+B,EAAMjI,EAAIiI,EAAMhI,MAAQ,EAAGiI,EAAMlI,EAAIkI,EAAMjI,MAAQ,GAEhE,CAEA,SAASkI,EAAWF,EAAOC,GACvB,OAAOjC,EAAOrB,KAAKuB,IAAI8B,EAAM/H,EAAI,EAAGgI,EAAMhI,EAAI,GAAI0E,KAAKsB,IAAI+B,EAAM/H,EAAI+H,EAAM9H,OAAS,EAAG+H,EAAMhI,EAAIgI,EAAM/H,OAAS,GACpH,CClDO,MAAMiI,EACT,WAAAhF,GACI7D,KAAKuF,UAAY,IAAI,MACrBvF,KAAK8I,SAAW,GAChB,MAAM,IAAE1I,EAAG,YAAE2I,GD2Id,WAEH,MAAMb,EAnJCc,MAAMrH,KAAK,CAAEK,OAmJQ,KAnJS5B,KAAI,KAAM,CAC3CK,EAAG,EACHE,EAAG,EACHD,MAAOgG,EAAO,EAAG,IACjB9F,OAAQ8F,EAAO,EAAG,QAkJtBwB,EAAMe,MAAM,GAAG5B,SAAQ,CAAC6B,EAAMC,KAC1B,MAAM3C,EAAYE,EAAO,EAAG,IAlGpC,SAAkBwC,EAAM1C,EAAW4C,GAC/B,MAAMC,EAA0B3C,EAAO,EAAG,GACpC4C,EAAgBjE,KAAKsB,IAAIuC,EAAKxI,MAAO0I,EAAc1I,OACnD6I,EAAiBlE,KAAKsB,IAAIuC,EAAKtI,OAAQwI,EAAcxI,QAC3D,IAAI4I,EAASC,EAEb,MAAMC,EAAuC,IAAjBhD,EAAO,EAAG,GAAW,GAAK,EACtD,OAAQF,GAEJ,KAAKK,EAAUsB,MAEXe,EAAKvI,EAAIyI,EAAczI,EAAIuI,EAAKtI,OAASyI,EAEzCH,EAAKzI,EACD2I,EAAc3I,EACViG,EAAO,EAAG4C,EAvEH,GAuEyCI,EACxDF,EAAUf,EAAWS,EAAME,GAE3BF,EAAKS,SAAW,CACZhI,KAAM,CACFlB,EAAG+I,EACH7I,EAAGuI,EAAKvI,EAAIuI,EAAKtI,OAAS,GAE9BgJ,GAAI,CACAnJ,EAAG+I,EACH7I,EAAGyI,EAAczI,GAErB6F,aAEJ,MAEJ,KAAKK,EAAUyB,KACXY,EAAKzI,EAAI2I,EAAc3I,EAAI2I,EAAc1I,MAAQ2I,EACjDH,EAAKvI,EACDyI,EAAczI,EACV+F,EAAO,EAAG6C,EA1FF,GA0F0CG,EAC1DD,EAAUb,EAAWM,EAAME,GAE3BF,EAAKS,SAAW,CACZhI,KAAM,CACFlB,EAAGyI,EAAKzI,EACRE,EAAG8I,GAEPG,GAAI,CACAnJ,EAAG2I,EAAc3I,EAAI2I,EAAc1I,MAAQ,EAC3CC,EAAG8I,GAEPjD,aAEJ,MAEJ,KAAKK,EAAU0B,MACXW,EAAKvI,EAAIyI,EAAczI,EAAIyI,EAAcxI,OAASyI,EAClDH,EAAKzI,EACD2I,EAAc3I,EACViG,EAAO,EAAG4C,EA/GH,GA+GyCI,EACxDF,EAAUf,EAAWS,EAAME,GAE3BF,EAAKS,SAAW,CACZhI,KAAM,CACFlB,EAAG+I,EACH7I,EAAGuI,EAAKvI,GAEZiJ,GAAI,CACAnJ,EAAG+I,EACH7I,EAAGyI,EAAczI,EAAIyI,EAAcxI,OAAS,GAEhD4F,aAEJ,MAEJ,KAAKK,EAAU2B,KACXU,EAAKzI,EAAI2I,EAAc3I,EAAIyI,EAAKxI,MAAQ2I,EACxCH,EAAKvI,EACDyI,EAAczI,EACV+F,EAAO,EAAG6C,EAlIF,GAkI0CG,EAC1DD,EAAUb,EAAWM,EAAME,GAE3BF,EAAKS,SAAW,CACZhI,KAAM,CACFlB,EAAGyI,EAAKzI,EAAIyI,EAAKxI,MAAQ,EACzBC,EAAG8I,GAEPG,GAAI,CACAnJ,EAAG2I,EAAc3I,EACjBE,EAAG8I,GAEPjD,aAIhB,CASQqD,CAASX,EAAM1C,EADiB,IAAV2C,EAAcjB,EAAM,GAAKD,EAAiBC,EAAO1B,GAC/B,IAI5C,MAAMsD,EAAe7B,EAAiBC,EAAOrB,EAAU2B,MACjDuB,EAAgB9B,EAAiBC,EAAOrB,EAAUsB,OAClD6B,EAASF,EAAarJ,EACtBwJ,EAASF,EAAcpJ,EACvBP,EAAM,GAiEZ,OAhEA8H,EAAMb,SAAS6B,IACX,IAAK,IAAIvI,EAAI,EAAGA,EAAIuI,EAAKtI,OAAQD,IAC7B,IAAK,IAAIF,EAAI,EAAGA,EAAIyI,EAAKxI,MAAOD,IAAK,CACjC,MAAMyJ,EAAe,IAANzJ,GAAWA,IAAMyI,EAAKxI,MAAQ,GAAW,IAANC,GAAWA,IAAMuI,EAAKtI,OAAS,EAC3EuJ,EAAO9E,KAAK+E,IAAIJ,GAAUd,EAAKzI,EAAIA,IACnC4J,EAAOhF,KAAK+E,IAAIH,GAAUf,EAAKvI,EAAIA,SACvB8F,IAAdrG,EAAIiK,KACJjK,EAAIiK,GAAQ,IAEhBjK,EAAIiK,GAAMF,GAAQD,EAAS,EAAI,CACnC,CACJ,IAGJhC,EACKoC,QAAQpB,KAAWA,EAAKS,WACxBtC,SAAS6B,IACV,MAAM,KAAEvH,EAAI,GAAEiI,EAAE,UAAEpD,GAAc0C,EAAKS,SAC/BY,EAAiB/D,IAAcK,EAAUsB,OAAS3B,IAAcK,EAAU0B,MAC1ElD,KAAK+E,IAAIzI,EAAKhB,EAAIiJ,EAAGjJ,GACrB0E,KAAK+E,IAAIzI,EAAKlB,EAAImJ,EAAGnJ,GAC3B,IAAK,IAAIF,EAAI,EAAGA,GAAKgK,EAAgBhK,IAAK,CACtC,IAAI4J,EAAO9E,KAAK+E,IAAIJ,EAASrI,EAAKlB,GAC9B4J,EAAOhF,KAAK+E,IAAIH,EAAStI,EAAKhB,GAC9B6F,IAAcK,EAAUsB,MACxBkC,GAAQ9J,EAEHiG,IAAcK,EAAUyB,KAC7B6B,GAAQ5J,EAEHiG,IAAcK,EAAU0B,MAC7B8B,GAAQ9J,EAEHiG,IAAcK,EAAU2B,OAC7B2B,GAAQ5J,QAEMkG,IAAdrG,EAAIiK,KACJjK,EAAIiK,GAAQ,IAEhBjK,EAAIiK,GAAMF,GAAQ,EAEd3D,IAAcK,EAAUsB,OAAS3B,IAAcK,EAAU0B,OACzDnI,EAAIiK,GAAMF,EAAO,GAAK,EACtB/J,EAAIiK,GAAMF,EAAO,GAAK,GAEjB3D,IAAcK,EAAUyB,MAC7B9B,IAAcK,EAAU2B,YACF/B,IAAlBrG,EAAIiK,EAAO,KACXjK,EAAIiK,EAAO,GAAK,SAEE5D,IAAlBrG,EAAIiK,EAAO,KACXjK,EAAIiK,EAAO,GAAK,IAEpBjK,EAAIiK,EAAO,GAAGF,GAAQ,EACtB/J,EAAIiK,EAAO,GAAGF,GAAQ,EAE9B,CAEA,GAAI3D,IAAcK,EAAUsB,OAAS3B,IAAcK,EAAU0B,MAAO,CAChE,MAAMiC,EAAQnF,KAAK+E,IAAIJ,EAASJ,EAAGnJ,GAC7BgK,EAAQpF,KAAK+E,IAAIH,EAASL,EAAGjJ,GACnCP,EAAIqK,GAAOD,GAAS,CACxB,KAEG,CACHpK,MACA2I,YAAa,CACTtI,EAAG4E,KAAK+E,IAAIJ,GAAU9B,EAAM,GAAGzH,EAAI4E,KAAKI,MAAMyC,EAAM,GAAGxH,MAAQ,KAC/DC,EAAG0E,KAAK+E,IAAIH,GAAU/B,EAAM,GAAGvH,EAAI0E,KAAKI,MAAMyC,EAAM,GAAGtH,OAAS,MAG5E,CCnOqC8J,GAC7B1K,KAAK2K,OAASvK,EACdJ,KAAK4K,cAAgB7B,CACzB,CACA,IAAA5E,GACI,OAtB8CpE,EAsB7BC,KAtBsCC,OAsBhC,EAtB+CC,EAsB/B,YACnCF,KAAKgG,YFTV,SAAkB2E,GACrB,OAfkD5K,EAejCC,KAf0CC,OAepC,EAfmDC,EAenC,YACnC,MAAM8F,EAAQ2E,EAAOrJ,QAAO,CAAClB,EAAKyK,EAAKlK,KACnCkK,EAAIxD,SAAQ,CAACtB,EAAMtF,KACf,IAAI6B,EACJ,MAAM0B,EAAO+B,EACb3F,EAAItB,KAAK,CACLkF,OACAvD,IACAE,IACAuF,MAAOlC,IAASL,EAASwC,MAAQnC,IAASL,EAAS2D,KACnDwD,OAAQ,IAGP9G,IAASL,EAASwC,MAAQnC,IAASL,EAAS2D,WACxBb,IAArBkE,EAAOhK,GAAGF,EAAI,SACwDgG,KAA5C,QAAxBnE,EAAKqI,EAAOhK,EAAI,UAAuB,IAAP2B,OAAgB,EAASA,EAAG7B,KAC9DL,EAAItB,KAAK,CACLkF,KAAML,EAAS8B,MACfhF,IACAE,IACAuF,OAAO,EACP4E,OAAQ,GAEhB,IAEG1K,IACR,IACH,IAAK,IAAIG,EAAI,EAAGA,EAAIyF,EAAMhE,OAAQzB,IAAK,CACnC,MAAMwF,EAAOC,EAAMzF,GACbwK,EAAmB/E,EAAMC,MAAM+B,GAAMA,EAAEvH,IAAMsF,EAAKtF,EAAI,GAAKuH,EAAErH,IAAMoF,EAAKpF,GAAKqH,EAAEhE,OAASL,EAASwC,OACvG,OAAQJ,EAAK/B,MACT,KAAKL,EAASwC,KAYV,GAXAJ,EAAKK,WAAa,CACdC,SAAUyB,EAAa/B,EAAMC,IAEjCD,EAAKK,WAAW4E,WA+EA,4BADZC,EA9EwClF,EAAKK,YA+E9CC,SACR,OAEqB,4BAA5B4E,EAAe5E,SACR,aADX,EAhFmD,UAA/BN,EAAKK,WAAW4E,WAChBjF,EAAK+E,OAASC,EAAiBD,OAE1B/E,EAAKK,WAAW4E,aACrBjF,EAAK+E,OAASpE,EAAO,EAAG,IAExBX,EAAKK,WAAWC,SAASC,SAAS,UAAW,CAC7CP,EAAKmF,YAAc1L,EAAgB,CAC/BC,UAAW,CAAEiB,MAAO,IAAKE,OAAQ,KACjCjB,UAAW,gBAAgBoG,EAAKK,WAAWC,eAC3C3G,eAAgB,CAAC,WACjBE,kBAAmB,UACnBC,kBAAmB,CACf,IAAK,CACDuE,eAAgB,MAChBC,MAAM,MAIlB,IAAK,IAAI9D,EAAIwF,EAAK+E,OAAQvK,EAAI,EAAGA,IAC7BwF,EAAKmF,MAAM3I,YAEfwD,EAAKmF,MAAMC,MAAMxK,EAAIoF,EAAKmF,MAAMtK,OAAS,CAC7C,MAEImF,EAAKmF,MAAQ,MAAOvJ,KAAK,gBAAgBoE,EAAKK,WAAWC,gBACzDN,EAAKmF,MAAME,OAAOzK,EAAIoF,EAAKmF,MAAMtK,OAAS,EAE9CmF,EAAKmF,MAAMjH,OAAS8B,EAAKpF,EACzB,MACJ,KAAKgD,EAAS8B,MACVM,EAAKK,WAAa,CAAEiF,UAAW9D,EAAcxB,EAAMC,IACnDD,EAAKmF,MAAQ,MAAOvJ,KAAK,iBAAiBoE,EAAKK,WAAWiF,iBAC1DtF,EAAKmF,MAAMjH,QAAU,EACrB,MACJ,KAAKN,EAAS2D,KACVvB,EAAKmF,YAAc1L,EAAgB,CAC/BC,UAAW,CAAEiB,MAAO,IAAKE,OAAQ,KACjCjB,UAAW,kBACXD,eAAgB,CAAC,OAAQ,SACzBE,kBAAmB,OACnBC,kBAAmB,CACf,IAAK,CACDuE,eAAgB,MAChBC,MAAM,MAIlB0B,EAAKK,WAAa,CACdkF,MAAM,EACNC,OAAQ,KACJ,MAAMjE,EAAOvB,EACRuB,EAAKlB,WAAWkF,KAMZhE,EAAKlB,WAAWkF,OACrBhE,EAAKlB,WAAWkF,MAAO,EACvBhE,EAAKpB,OAAQ,EACboB,EAAK4D,MAAMpJ,gBAAgB,SAC3BwF,EAAK4D,MAAM7I,SATXiF,EAAKlB,WAAWkF,MAAO,EACvBhE,EAAKpB,OAAQ,EACboB,EAAK4D,MAAMpJ,gBAAgB,QAC3BwF,EAAK4D,MAAM7I,OAOf,GAGR0D,EAAKmF,MAAMjH,OAAS8B,EAAKpF,EACzBoF,EAAKmF,MAAMC,MAAMxK,EAAIoF,EAAKmF,MAAMtK,OAAS,EAGjDmF,EAAKmF,MAAMzK,EAAIsF,EAAKtF,EAAIiD,EACxBqC,EAAKmF,MAAMvK,EAAIoF,EAAKpF,EAAI+C,CAC5B,CAIR,IAAwBuH,EAHhB,OAAOjF,CACX,EA5HO,KAFgEpD,OAexC,KAbbA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKhD,EAAUiD,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKhD,EAAiB,MAAE+C,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMhD,EAAYA,EAAUuD,MAAM1D,EAASE,GAAc,KAAKkD,OAClE,IAPwC,IAAUpD,EAASE,EAAY2C,EAAG1C,CA+H9E,CExG+BsL,CAASxL,KAAK2K,QACjC3K,KAAKgG,MAAMqB,SAAStB,GAAS/F,KAAKuF,UAAUpD,SAAS4D,EAAKmF,SAC1DlL,KAAKuF,UAAUkG,kBAAmB,CACtC,EAxBG,KAFgE7I,OAsBpC,KApBjBA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKhD,EAAUiD,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKhD,EAAiB,MAAE+C,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMhD,EAAYA,EAAUuD,MAAM1D,EAASE,GAAc,KAAKkD,OAClE,IAPwC,IAAUpD,EAASE,EAAY2C,EAAG1C,CA2B1E,CACA,OAAA0E,GACI5E,KAAKuF,UAAUX,UACf5E,KAAK8I,SAASzB,SAASqE,GAAWA,EAAO9G,WAC7C,CACA,SAAA+G,CAAUD,GACN1L,KAAK8I,SAAShK,KAAK4M,GACnB1L,KAAKuF,UAAUpD,SAASuJ,EAC5B,CACA,WAAAE,GACI,OAAO5L,KAAK8I,QAChB,CACA,OAAA+C,CAAQpL,EAAGE,GACP,MAAMmL,EAAQzG,KAAKC,MAAM7E,EAAIiD,GACvBqI,EAAQ1G,KAAKC,MAAM3E,EAAI+C,GAC7B,OAAO1D,KAAKgG,MAAMC,MAAM+B,GAAMA,EAAEvH,IAAMqL,GAAS9D,EAAErH,IAAMoL,GAC3D,CACA,QAAAC,CAASvL,EAAGE,EAAGsL,GAKX,OAJcjM,KAAKgG,MAAMsE,QAAQtC,GAAMA,EAAEvH,GAAK4E,KAAKC,OAAO7E,EAAIwL,GAAUvI,IACpEsE,EAAEvH,GAAK4E,KAAKC,OAAO7E,EAAIwL,GAAUvI,IACjCsE,EAAErH,GAAK0E,KAAKC,OAAO3E,EAAIsL,GAAUvI,IACjCsE,EAAErH,GAAK0E,KAAKC,OAAO3E,EAAIsL,GAAUvI,IAEzC,EClBG,MAAMwI,EAAQ,IAhCrB,MACI,WAAArI,GACI7D,KAAKmM,aAAe,CACxB,CACA,MAAAC,CAAOC,GACHrM,KAAKsM,SAAWD,CACpB,CAMA,UAAAE,CAAWC,EAAStN,GAChB,IAAIoD,EACJ,MAAMtD,GAAMgB,KAAKmM,gBAAgBM,WACR,QAAxBnK,EAAKtC,KAAKsM,gBAA6B,IAAPhK,GAAyBA,EAAGoK,KAAK1M,KAAM,MAAO,CAC3EhB,KACA2N,KAAM,SACNH,UACAtN,YAEJ,MAAM0N,EAAU,IAAM5M,KAAK6M,YAAY7N,GAIvC,OAHIE,aAAyC,EAASA,EAAQ4N,iBAC1DC,WAAWH,EAAS1N,EAAQ4N,gBAEzBF,CACX,CACA,WAAAC,CAAY7N,GACR,IAAIsD,EACqB,QAAxBA,EAAKtC,KAAKsM,gBAA6B,IAAPhK,GAAyBA,EAAGoK,KAAK1M,KAAM,SAAU,CAAEhB,MACxF,GCvBG,MAAMgO,EACT,WAAAnJ,CAAYoJ,EAAW7M,EAAK0D,GACxB9D,KAAKiN,UAAYA,EACjBjN,KAAKI,IAAMA,EACXJ,KAAK8D,IAAMA,EACX9D,KAAKkN,YAAc,IAAIC,IACvBnN,KAAKoN,qBAAuB,KACxB,IAAI9K,EACJ,MAAM,EAAE7B,EAAC,EAAEE,GAAMX,KAAKiN,UAChBjH,EAAQhG,KAAKI,IAAI4L,SAASvL,EAAGE,ERfd,IQgBf0M,EAAcrH,EAAMH,MAAME,GAASA,EAAK/B,OAASL,EAAS2D,OAC1DgG,EAAatH,EAAMH,MAAME,GAASA,EAAK/B,OAASL,EAASwC,MAAQJ,EAAK+E,OAAS,IAErF,GAAIuC,EAAa,CACb,GAAIrN,KAAKuN,cACL,OAEJvN,KAAKuN,cAAgBrB,EAAMK,WAAW,CAAEiB,IAAK,IAAKC,QAAS,YAAc,CAAE5L,UAAW,QAC1F,MACK,GAAIyL,EAAY,CACjB,GAAItN,KAAKuN,cACL,OAEJvN,KAAKuN,cAAgBrB,EAAMK,WAAW,CAAEiB,IAAK,IAAKC,QAAS,UAAY,CAAE5L,UAAW,QACxF,MAEkC,QAA7BS,EAAKtC,KAAKuN,qBAAkC,IAAPjL,GAAyBA,EAAGoK,KAAK1M,MACvEA,KAAKuN,mBAAgB9G,CACzB,EAEJiH,OAAOC,iBAAiB,UAAW3N,KAAK4N,UAAUjJ,KAAK3E,OACvD0N,OAAOC,iBAAiB,QAAS3N,KAAK6N,QAAQlJ,KAAK3E,OACnDA,KAAK8D,IAAIU,OAAOC,IAAIzE,KAAK0E,OAAOC,KAAK3E,MACzC,CACA,OAAA4E,GACI5E,KAAK8D,IAAIU,OAAOK,OAAO7E,KAAK0E,OAAOC,KAAK3E,MAC5C,CACA,MAAA0E,GACI1E,KAAKoN,sBACT,CACA,gBAAAU,GAEI,OADY9N,KAAKkN,YAAYa,SAAS5K,OAAOF,OAEzC,IAAK,IACDjD,KAAKgO,WACL,MACJ,IAAK,UACDhO,KAAKiN,UAAU1G,KAAK,MACpB,MACJ,IAAK,YACDvG,KAAKiN,UAAU1G,KAAK,QACpB,MACJ,IAAK,YACDvG,KAAKiN,UAAU1G,KAAK,QACpB,MACJ,IAAK,aACDvG,KAAKiN,UAAU1G,KAAK,SACpB,MACJ,QACIvG,KAAKiN,UAAU1I,cAG3B,CACA,QAAAyJ,GACI,MAAM,EAAEvN,EAAC,EAAEE,GAAMX,KAAKiN,UAChBjH,EAAQhG,KAAKI,IAAI4L,SAASvL,EAAGE,ERvEV,IQwEnB2G,EAAOtB,EAAMC,MAAMF,GAASA,EAAK/B,OAASL,EAAS2D,OACnDnB,EAAOH,EAAMC,MAAMF,GAASA,EAAK/B,OAASL,EAASwC,MAAQJ,EAAK+E,OAAS,KAE3ExD,GAEEA,EAAK7G,IAAM4E,KAAKC,MAAM7E,EAAIiD,IAExB4D,EAAK3G,IAAM0E,KAAKC,OAAO3E,EAAI,IAAM+C,IACjC2B,KAAK+E,IAAI9C,EAAK3G,EAAI+C,EAAW/C,GAAK+C,GAGjCyC,IACLA,EAAK+E,MAAMvI,YACXwD,EAAK2E,UAJLxD,EAAKlB,WAAWmF,QAMxB,CACA,SAAAqC,CAAUK,IACDA,EAAMT,IAAIlH,SAAS,UAA0B,MAAd2H,EAAMT,OAG1CxN,KAAKkN,YAAYzI,IAAIwJ,EAAMT,KAC3BxN,KAAK8N,mBACT,CACA,OAAAD,CAAQI,GACJjO,KAAKkN,YAAYgB,OAAOD,EAAMT,KAC9BxN,KAAK8N,kBACT,ECnGG,SAASK,EAASC,EAAIC,EAAIC,EAAIC,GACjC,OAAOlJ,KAAKmJ,KAAKnJ,KAAKoJ,IAAIH,EAAKF,EAAI,GAAK/I,KAAKoJ,IAAIF,EAAKF,EAAI,GAC9D,CCFO,SAASK,EAASC,EAAWC,EAAQxO,EAAKyO,GAC7C,MAAMC,EAAU1O,EAAIyL,QAAQ+C,EAAOnO,EAAI,EAAGmO,EAAOjO,EAAI,GAsC/CoO,EAAc,GACpB3O,EAAI4F,MAAMqB,SAAStB,IACVgJ,EAAYhJ,EAAKpF,KAClBoO,EAAYhJ,EAAKpF,GAAK,SAEU8F,IAAhCsI,EAAYhJ,EAAKpF,GAAGoF,EAAKtF,KACzBsO,EAAYhJ,EAAKpF,GAAGoF,EAAKtF,GAAKsF,EAAKG,OAAS,EAAI,EACpD,IAEJ6I,EAAYJ,EAAUhO,GAAGgO,EAAUlO,GAAK,EACxC,MAAMuO,EA/CN,SAASC,EAAQC,EAAWH,GACxB,MAAMhJ,EAAOmJ,EAAUC,MACvB,IAAKpJ,GAAQgJ,EAAYhJ,EAAKpF,GAAGoF,EAAKtF,GAAKoO,EACvC,OAAO,EAEX,MAAM,EAAEpO,EAAC,EAAEE,GAAMoF,EACXqJ,EAAoBL,EAAYpO,GAAGF,GAEzC,GAAIqO,EAAQrO,IAAMA,GAAKqO,EAAQnO,IAAMA,EACjC,OAAO,EAEX,MAAM0O,EAAeD,EAAoB,EACzC,OAAIC,EAAeR,IAIflO,EAAI,GAAK,GAA+B,IAA1BoO,EAAYpO,EAAI,GAAGF,KACjCsO,EAAYpO,EAAI,GAAGF,GAAK4O,EACxBH,EAAUpQ,KAAK,CAAE6B,EAAGA,EAAI,EAAGF,OAG3BE,EAAI,EAAIoO,EAAY/M,QAAoC,IAA1B+M,EAAYpO,EAAI,GAAGF,KACjDsO,EAAYpO,EAAI,GAAGF,GAAK4O,EACxBH,EAAUpQ,KAAK,CAAE6B,EAAGA,EAAI,EAAGF,OAG3BA,EAAI,GAAK,GAA+B,IAA1BsO,EAAYpO,GAAGF,EAAI,KACjCsO,EAAYpO,GAAGF,EAAI,GAAK4O,EACxBH,EAAUpQ,KAAK,CAAE6B,IAAGF,EAAGA,EAAI,KAG3BA,EAAI,EAAIsO,EAAYpO,GAAGqB,QAAoC,IAA1B+M,EAAYpO,GAAGF,EAAI,KACpDsO,EAAYpO,GAAGF,EAAI,GAAK4O,EACxBH,EAAUpQ,KAAK,CAAE6B,IAAGF,EAAGA,EAAI,MApBpBwO,EAAQC,EAAWH,EAuBlC,CAWcE,CAAQ,CAACN,GAAYI,GACnC,IAAKC,EACD,MAAO,GAEX,MAAMM,EAAO,GACb,IAAI7O,EAAIqO,EAAQrO,EAAGE,EAAImO,EAAQnO,EAC/B,OAGI,GAFA2O,EAAKC,QAAQ,CAAE9O,IAAGE,MAEdF,EAAI,GAAK,GAAKsO,EAAYpO,GAAGF,EAAI,KAAOsO,EAAYpO,GAAGF,GAAK,EAC5DA,SAGC,GAAIA,EAAI,EAAIsO,EAAYpO,GAAGqB,QAC5B+M,EAAYpO,GAAGF,EAAI,KAAOsO,EAAYpO,GAAGF,GAAK,EAC9CA,SAGC,GAAIE,EAAI,GAAK,GAAKoO,EAAYpO,EAAI,GAAGF,KAAOsO,EAAYpO,GAAGF,GAAK,EACjEE,QAGC,MAAIA,EAAI,EAAIoO,EAAY/M,QACzB+M,EAAYpO,EAAI,GAAGF,KAAOsO,EAAYpO,GAAGF,GAAK,GAI9C,MAHAE,GAIJ,CAGJ,OAAO2O,CACX,CChEO,MAAME,UAAc,MACvB,WAAA3L,CAAYzD,EAAK0D,EAAKI,EAAOuL,EAAiB,IAAKC,EAAW,IAC1D3L,QACA/D,KAAKI,IAAMA,EACXJ,KAAK8D,IAAMA,EACX9D,KAAKkE,MAAQA,EACblE,KAAKyP,eAAiBA,EACtBzP,KAAK0P,SAAWA,EAChB1P,KAAKgE,KAAO,QACZhE,KAAK8D,IAAIU,OAAOC,IAAIzE,KAAK0E,OAAOC,KAAK3E,MACzC,CACA,IAAAmE,GACI,OA7B8CpE,EA6B7BC,KA7BsCC,OA6BhC,EA7B+CC,EA6B/B,YACnCF,KAAK6B,gBAAkBrC,EAAgB,CACnCC,UAAW,CAAEiB,MAAO,IAAKE,OAAQ,KACjCjB,UAAW,0BACXD,eAAgB,CACZ,YACA,UACA,YACA,aACA,QAEJE,kBAAmB,OACnBC,kBAAmB,CACf,IAAK,CACDuE,eAAgB,MAChBC,MAAM,EACNjC,UAAU,GAEdkC,KAAM,CACFlC,UAAU,EACVgC,eAAgB,QAGxBtE,MAAO,MAEXE,KAAKmC,SAASnC,KAAK6B,WAInB7B,KAAK6B,UAAUpB,GAAKiD,EAAW1D,KAAKU,OAAS,EAE7CV,KAAKuE,aACT,EA3DG,KAFgE3B,OA6BpC,KA3BjBA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKhD,EAAUiD,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKhD,EAAiB,MAAE+C,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMhD,EAAYA,EAAUuD,MAAM1D,EAASE,GAAc,KAAKkD,OAClE,IAPwC,IAAUpD,EAASE,EAAY2C,EAAG1C,CA8D1E,CACA,OAAA0E,GACIb,MAAMa,UACN5E,KAAK8D,IAAIU,OAAOK,OAAO7E,KAAK0E,OAAOC,KAAK3E,MAC5C,CACA,MAAA0E,GACI,IAAIpC,GAEsB,QAApBA,EAAKtC,KAAKsP,YAAyB,IAAPhN,OAAgB,EAASA,EAAGN,QAAU,GACpEhC,KAAK2P,aAET,IAAK,MAAMjE,KAAU1L,KAAKI,IAAIwL,cAAe,CAEzC,MAAMgE,EAAmBzB,EAASnO,KAAKS,EAAGT,KAAKW,EAAG+K,EAAOjL,EAAGiL,EAAO/K,GACnE,GAAoB,cAAhB+K,EAAO1H,MAAwB4L,EAAmB5P,KAAK0P,eAItD,GAAoB,cAAhBhE,EAAO1H,MACZ4L,EAAmB5P,KAAKyP,gBAExBG,EAAmB5P,KAAK0P,YAEtB1P,KAAKsP,MACkB,IAArBtP,KAAKsP,KAAKtN,QACThC,KAAKsP,KAAKtP,KAAKsP,KAAKtN,OAAS,GAAGvB,IAC7B4E,KAAKC,MAAMoG,EAAOjL,EAAIiD,IACtB1D,KAAKsP,KAAKtP,KAAKsP,KAAKtN,OAAS,GAAGrB,IAC5B0E,KAAKC,MAAMoG,EAAO/K,EAAI+C,IAAa,CAC/C,MAAMmM,EAAS7P,KAAKI,IAAIyL,QAAQ7L,KAAKS,EAAI,EAAGT,KAAKW,EAAI,GAGrD,YAFAX,KAAKsP,KAAOZ,EAASmB,EAAQnE,EAAQ1L,KAAKI,IAC1BwP,EAAmBlM,EAAW,GAElD,CACJ,CACJ,CACA,UAAAiM,GACI,MAAMG,EAAc9P,KAAKsP,KAAK,GACxBS,EAAUD,EAAYrP,EAAIiD,EAC1BsM,EAAUF,EAAYnP,EAAI+C,EAC1BuB,EAAS8K,EAAU/P,KAAKS,EACxByE,EAAS8K,EAAUhQ,KAAKW,EACxBsP,EAAmB9B,EAASnO,KAAKS,EAAGT,KAAKW,EAAGoP,EAASC,GAEvD3K,KAAK+E,IAAInF,GAAUI,KAAK+E,IAAIlF,GAC5BD,EAAS,EAAIjF,KAAKuG,KAAK,SAAWvG,KAAKuG,KAAK,QAG5CrB,EAAS,EAAIlF,KAAKuG,KAAK,QAAUvG,KAAKuG,KAAK,MAE3C0J,EAAmBjQ,KAAK0P,UACxB1P,KAAKS,EAAIsP,EACT/P,KAAKW,EAAIqP,EACThQ,KAAKsP,KAAKY,QACVlQ,KAAKuE,gBAGLvE,KAAKS,GAAMwE,EAASgL,EAAoBjQ,KAAKkE,MAC7ClE,KAAKW,GAAMuE,EAAS+K,EAAoBjQ,KAAKkE,MAErD,CACA,IAAAqC,CAAKC,GAEGxG,KAAK+E,gBAAkByB,IAI3BxG,KAAKuE,cAELvE,KAAK+E,cAAgByB,EAErBxG,KAAK6B,UAAUC,gBAAgB,QAAQ0E,KAC3C,CACA,WAAAjC,GACIvE,KAAK+E,mBAAgB0B,EAErBzG,KAAK6B,UAAUC,gBAAgB,OACnC,EC1HG,MAAMgC,EAAM,IAAI,MAAY,CAC/BpD,MAAOgN,OAAOyC,WACdvP,OAAQ8M,OAAO0C,YACfC,SAAU3C,OACV4C,gBAAiB,YAEd,MAAMC,EACT,WAAA1M,GAEI7D,KAAKI,IAAM,IAAIyI,EACf/E,EAAI0M,MAAMC,WAAa3M,EAAI4M,OAC3B,MAAMC,EAAY,IAAI,IAAU,CAAEC,WAAY,IAC9C9M,EAAI0M,MAAMK,QAAU,CAACF,GAErB,MAAMG,EAAWC,aAAY,KACzBJ,EAAUC,YAAc,IACpBD,EAAUC,WZ/BS,MYgCnBI,cAAcF,GACd5E,EAAMK,WAAW,CAAEkB,QAAS,oBAAsB,CAAEX,eAAgB,IAAMjL,UAAW,SACzF,GACD,GACP,CACA,IAAAsC,GACI,OAxC8CpE,EAwC7BC,KAxCsCC,OAwChC,EAxC+CC,EAwC/B,kBAE7BF,KAAKI,IAAI+D,OAEfnE,KAAKiN,UAAY,IAAIrJ,EAAU5D,KAAKI,IAAK0D,SACnC9D,KAAKiN,UAAU9I,OACrBnE,KAAKiN,UAAUxM,EAAIT,KAAKI,IAAIwK,cAAcnK,EAAIiD,EAC9C1D,KAAKiN,UAAUtM,EAAIX,KAAKI,IAAIwK,cAAcjK,EAAI+C,EAE9C1D,KAAKI,IAAIuL,UAAU3L,KAAKiN,WAExB,MAAMgE,EAAQ,IAAIzB,EAAMxP,KAAKI,IAAK0D,EACtB,EACS,WACfmN,EAAM9M,OAEZ8M,EAAMxQ,EAAIT,KAAKI,IAAIwK,cAAcnK,EAAIiD,EACrCuN,EAAMtQ,EAAIX,KAAKI,IAAIwK,cAAcjK,EAAI+C,EAErC1D,KAAKI,IAAIuL,UAAUsF,GACnB,MAAMC,EACCpN,EAAIqN,KAAKzQ,MAAQ,EADlBwQ,EAECpN,EAAIqN,KAAKvQ,OAAS,EAGzBZ,KAAKI,IAAImF,UAAU9E,EAAIyQ,EAAiBlR,KAAKiN,UAAUxM,EACvDT,KAAKI,IAAImF,UAAU5E,EAAIuQ,EAAiBlR,KAAKiN,UAAUtM,EAEvDmD,EAAI0M,MAAMrO,SAASnC,KAAKI,IAAImF,WAE5BvF,KAAKoR,mBAAqB,IAAIpE,EAAmBhN,KAAKiN,UAAWjN,KAAKI,IAAK0D,EAC/E,EArEG,KAFgElB,OAwCpC,KAtCjBA,EAAIC,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKhD,EAAUiD,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKhD,EAAiB,MAAE+C,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBL,EAAIK,EAAQ,IAAIL,GAAE,SAAUE,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMhD,EAAYA,EAAUuD,MAAM1D,EAASE,GAAc,KAAKkD,OAClE,IAPwC,IAAUpD,EAASE,EAAY2C,EAAG1C,CAwE1E,CACA,OAAA0E,GACI5E,KAAKoR,mBAAmBxM,UACxB5E,KAAKI,IAAIwE,SACb,E,aCjEA,EAAU,CAAC,EAEf,EAAQzF,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB,IAEhB,IAAI,IAAS,GAKJ,KAAW,IAAQN,QAAS,IAAQA,O,aCftD,EAAU,CAAC,EAEf,EAAQE,kBAAoB,IAC5B,EAAQC,cAAgB,IAElB,EAAQC,OAAS,SAAc,KAAM,QAE3C,EAAQC,OAAS,IACjB,EAAQC,mBAAqB,IAEhB,IAAI,IAAS,GAKJ,KAAW,IAAQN,QAAS,IAAQA,OCtB1D,MAAMoS,EAAe,CACjBC,OCHG,UAAgB,QAAE9E,EAAO,QAAEtN,IAC9B,OAAQ,gBAAoB,MAAO,CAAEqS,UAAW,WAAoF,UAAzErS,aAAyC,EAASA,EAAQ2C,WAAwB,wBAA0B,KACnK2K,EAAQgB,KAAO,gBAAoB,MAAO,CAAE+D,UAAW,cAAgB/E,EAAQgB,KAC/E,gBAAoB,MAAO,CAAE+D,UAAW,mBAA4F,UAAzErS,aAAyC,EAASA,EAAQ2C,WAAwB,wBAA0B,KAAQ2K,EAAQiB,SAC/L,GDCO,SAAS+D,IACZ,MAAOC,EAAgBC,GAAqB,WAAe,IAY3D,OAXA,aAAgB,KACZxF,EAAME,QAAO,CAAC6B,EAAO0D,KACjB,OAAQ1D,GACJ,IAAK,MACDyD,GAAmBtJ,GAAS,IAAIA,EAAMuJ,KACtC,MACJ,IAAK,SACDD,GAAmBtJ,GAASA,EAAKkC,QAAQsH,GAAYA,EAAQ5S,KAAO2S,EAAK3S,OACjF,GACF,GACH,CAACkN,IACI,gBAAoB,MAAO,CAAEqF,UAAW,iBAAmBE,EAAerR,KAAKwR,IACnF,MAAMC,EAAYR,EAAaO,EAAQjF,MACvC,OAAO,gBAAoBkF,EAAW3Q,OAAOC,OAAO,CAAEqM,IAAKoE,EAAQ5S,IAAM4S,GAAS,IAE1F,EErBA,OAAWE,SAASC,eAAe,SAASC,OAAO,iBCC5C,WAYH,OAXA,aAAgB,KAGZ,MAAMC,EAAUH,SAASI,cAAc,OACvCD,EAAQV,UAAY,cACpBU,EAAQE,YAAYrO,EAAIqN,MACxBW,SAASM,KAAKD,YAAYF,GAC1B,MAAMI,EAAa,IAAI9B,EAEvB,OADA8B,EAAWlO,OACJkO,EAAWzN,OAAO,GAC1B,IACI,gBAAoB4M,EAAc,KAC7C,GDd4E,M,GEFxEc,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB/L,IAAjBgM,EACH,OAAOA,EAAaC,QAGrB,IAAI3T,EAASuT,EAAyBE,GAAY,CACjDxT,GAAIwT,EACJG,QAAQ,EACRD,QAAS,CAAC,GAUX,OANAE,EAAoBJ,GAAU9F,KAAK3N,EAAO2T,QAAS3T,EAAQA,EAAO2T,QAASH,GAG3ExT,EAAO4T,QAAS,EAGT5T,EAAO2T,OACf,CAGAH,EAAoBM,EAAID,EzB5BpBhU,EAAW,GACf2T,EAAoBO,EAAI,CAACxP,EAAQyP,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS5S,EAAI,EAAGA,EAAI3B,EAASoD,OAAQzB,IAAK,CAGzC,IAFA,IAAKwS,EAAUC,EAAIC,GAAYrU,EAAS2B,GACpCyC,GAAY,EACPoQ,EAAI,EAAGA,EAAIL,EAAS/Q,OAAQoR,MACpB,EAAXH,GAAsBC,GAAgBD,IAAa/R,OAAOO,KAAK8Q,EAAoBO,GAAGO,OAAO7F,GAAS+E,EAAoBO,EAAEtF,GAAKuF,EAASK,MAC9IL,EAASO,OAAOF,IAAK,IAErBpQ,GAAY,EACTiQ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGjQ,EAAW,CACbpE,EAAS0U,OAAO/S,IAAK,GACrB,IAAIgT,EAAIP,SACEvM,IAAN8M,IAAiBjQ,EAASiQ,EAC/B,CACD,CACA,OAAOjQ,CAnBP,CAJC2P,EAAWA,GAAY,EACvB,IAAI,IAAI1S,EAAI3B,EAASoD,OAAQzB,EAAI,GAAK3B,EAAS2B,EAAI,GAAG,GAAK0S,EAAU1S,IAAK3B,EAAS2B,GAAK3B,EAAS2B,EAAI,GACrG3B,EAAS2B,GAAK,CAACwS,EAAUC,EAAIC,EAqBjB,E0BzBdV,EAAoBiB,EAAKzU,IACxB,IAAI0U,EAAS1U,GAAUA,EAAO2U,WAC7B,IAAO3U,EAAiB,QACxB,IAAM,EAEP,OADAwT,EAAoBoB,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdlB,EAAoBoB,EAAI,CAACjB,EAASmB,KACjC,IAAI,IAAIrG,KAAOqG,EACXtB,EAAoBuB,EAAED,EAAYrG,KAAS+E,EAAoBuB,EAAEpB,EAASlF,IAC5EtM,OAAO6S,eAAerB,EAASlF,EAAK,CAAEwG,YAAY,EAAMC,IAAKJ,EAAWrG,IAE1E,ECND+E,EAAoB2B,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOnU,MAAQ,IAAIoU,SAAS,cAAb,EAChB,CAAE,MAAOhR,GACR,GAAsB,iBAAXsK,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB6E,EAAoBuB,EAAI,CAACO,EAAKC,IAAUpT,OAAOqT,UAAUC,eAAe9H,KAAK2H,EAAKC,GCClF/B,EAAoBgB,EAAKb,IACH,oBAAX+B,QAA0BA,OAAOC,aAC1CxT,OAAO6S,eAAerB,EAAS+B,OAAOC,YAAa,CAAEzR,MAAO,WAE7D/B,OAAO6S,eAAerB,EAAS,aAAc,CAAEzP,OAAO,GAAO,ECL9DsP,EAAoBoC,IAAO5V,IAC1BA,EAAO6V,MAAQ,GACV7V,EAAOgD,WAAUhD,EAAOgD,SAAW,IACjChD,G,MCER,IAAI8V,EAAkB,CACrB,IAAK,GAaNtC,EAAoBO,EAAEM,EAAK0B,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4BrD,KACvD,IAGIa,EAAUsC,GAHT/B,EAAUkC,EAAaC,GAAWvD,EAGhBpR,EAAI,EAC3B,GAAGwS,EAASlN,MAAM7G,GAAgC,IAAxB6V,EAAgB7V,KAAa,CACtD,IAAIwT,KAAYyC,EACZ1C,EAAoBuB,EAAEmB,EAAazC,KACrCD,EAAoBM,EAAEL,GAAYyC,EAAYzC,IAGhD,GAAG0C,EAAS,IAAI5R,EAAS4R,EAAQ3C,EAClC,CAEA,IADGyC,GAA4BA,EAA2BrD,GACrDpR,EAAIwS,EAAS/Q,OAAQzB,IACzBuU,EAAU/B,EAASxS,GAChBgS,EAAoBuB,EAAEe,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOvC,EAAoBO,EAAExP,EAAO,EAGjC6R,EAAqB/N,KAA0B,oBAAIA,KAA0B,qBAAK,GACtF+N,EAAmB9N,QAAQ0N,EAAqBpQ,KAAK,KAAM,IAC3DwQ,EAAmBrW,KAAOiW,EAAqBpQ,KAAK,KAAMwQ,EAAmBrW,KAAK6F,KAAKwQ,G,KChDvF5C,EAAoB6C,QAAK3O,ECGzB,IAAI4O,EAAsB9C,EAAoBO,OAAErM,EAAW,CAAC,MAAM,IAAO8L,EAAoB,OAC7F8C,EAAsB9C,EAAoBO,EAAEuC,E","sources":["webpack://web-app/webpack/runtime/chunk loaded","webpack://web-app/./src/App.module.css","webpack://web-app/./src/react-ui/UIController.module.css","webpack://web-app/./src/react-ui/components/Dialog.module.css","webpack://web-app/./src/App.module.css?1bbe","webpack://web-app/./src/core/sprites/createAnimation.ts","webpack://web-app/./src/constants.ts","webpack://web-app/./src/core/types.ts","webpack://web-app/./src/core/entities/character.ts","webpack://web-app/./src/core/utils/math.ts","webpack://web-app/./src/core/map/parsing.ts","webpack://web-app/./src/core/map/generation.ts","webpack://web-app/./src/core/map/map.tsx","webpack://web-app/./src/react-ui/UIApi.ts","webpack://web-app/./src/core/interactionManager.ts","webpack://web-app/./src/utils/distance.ts","webpack://web-app/./src/utils/pathFinding.ts","webpack://web-app/./src/core/entities/enemy.ts","webpack://web-app/./src/core/core.ts","webpack://web-app/./src/react-ui/UIController.module.css?0a8a","webpack://web-app/./src/react-ui/components/Dialog.module.css?95be","webpack://web-app/./src/react-ui/UIController.tsx","webpack://web-app/./src/react-ui/components/Dialog.tsx","webpack://web-app/./src/index.tsx","webpack://web-app/./src/App.tsx","webpack://web-app/webpack/bootstrap","webpack://web-app/webpack/runtime/compat get default export","webpack://web-app/webpack/runtime/define property getters","webpack://web-app/webpack/runtime/global","webpack://web-app/webpack/runtime/hasOwnProperty shorthand","webpack://web-app/webpack/runtime/make namespace object","webpack://web-app/webpack/runtime/node module decorator","webpack://web-app/webpack/runtime/jsonp chunk loading","webpack://web-app/webpack/runtime/nonce","webpack://web-app/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.game-canvas {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/App.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,MAAM;EACN,OAAO;AACT\",\"sourcesContent\":[\".game-canvas {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"game-canvas\": `game-canvas`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.ui-controller {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/react-ui/UIController.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,MAAM;EACN,OAAO;AACT\",\"sourcesContent\":[\".ui-controller {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"ui-controller\": `ui-controller`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.dialog {\n  position: absolute;\n  top: 45%;\n  left: 50%;\n  transform: translateX(-25%);\n  z-index: 5;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  color: white;\n  display: flex;\n  flex-direction: row;\n}\n\n@keyframes text {\n  from {\n    width: 0%;\n  }\n  to {\n    width: 100%;\n  }\n}\n\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.dialog-key {\n  width: 50px;\n  height: 50px;\n  text-align: center;\n  font-weight: bold;\n  font-size: 40px;\n  border: 3px gold solid;\n}\n\n.dialog-content {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 10px;\n  font-size: 25px;\n  font-family: pixel-font, sans-serif;\n}\n\n.dialog-animation-text {\n  animation-name: text;\n  animation-duration: 1s;\n  animation-timing-function: linear;\n}\n\n.dialog-animation-fade {\n  animation-name: fadeIn;\n  animation-duration: 200ms;\n  animation-timing-function: linear;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/react-ui/components/Dialog.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,2BAA2B;EAC3B,UAAU;EACV,oCAAoC;EACpC,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE;IACE,SAAS;EACX;EACA;IACE,WAAW;EACb;AACF;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,iBAAiB;EACjB,eAAe;EACf,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;EACnB,aAAa;EACb,eAAe;EACf,mCAAmC;AACrC;;AAEA;EACE,oBAAoB;EACpB,sBAAsB;EACtB,iCAAiC;AACnC;;AAEA;EACE,sBAAsB;EACtB,yBAAyB;EACzB,iCAAiC;AACnC\",\"sourcesContent\":[\".dialog {\\n  position: absolute;\\n  top: 45%;\\n  left: 50%;\\n  transform: translateX(-25%);\\n  z-index: 5;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  align-items: center;\\n  color: white;\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n@keyframes text {\\n  from {\\n    width: 0%;\\n  }\\n  to {\\n    width: 100%;\\n  }\\n}\\n\\n@keyframes fadeIn {\\n  0% {\\n    opacity: 0;\\n  }\\n  100% {\\n    opacity: 1;\\n  }\\n}\\n\\n.dialog-key {\\n  width: 50px;\\n  height: 50px;\\n  text-align: center;\\n  font-weight: bold;\\n  font-size: 40px;\\n  border: 3px gold solid;\\n}\\n\\n.dialog-content {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  padding: 10px;\\n  font-size: 25px;\\n  font-family: pixel-font, sans-serif;\\n}\\n\\n.dialog-animation-text {\\n  animation-name: text;\\n  animation-duration: 1s;\\n  animation-timing-function: linear;\\n}\\n\\n.dialog-animation-fade {\\n  animation-name: fadeIn;\\n  animation-duration: 200ms;\\n  animation-timing-function: linear;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"dialog\": `dialog`,\n\t\"dialog-key\": `dialog-key`,\n\t\"dialog-content\": `dialog-content`,\n\t\"dialog-animation-text\": `dialog-animation-text`,\n\t\"text\": `text`,\n\t\"dialog-animation-fade\": `dialog-animation-fade`,\n\t\"fadeIn\": `fadeIn`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./App.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./App.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AnimatedSprite, BaseTexture, Spritesheet, Container, } from \"pixi.js\";\nfunction createFramesForAnimation(animationName, vIndex, frameSize) {\n    const frames = {};\n    for (let i = 0; i < 4; i++) {\n        frames[`${animationName}${i}`] = {\n            frame: {\n                x: i * frameSize.width,\n                y: vIndex * frameSize.height,\n                w: frameSize.width,\n                h: frameSize.height,\n            },\n            sourceSize: { w: frameSize.width, h: frameSize.height },\n        };\n    }\n    return frames;\n}\nexport function createAnimation({ frameSize, animationNames, assetPath, idleAnimationName, animationSettings, scale = \"1\", }) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const frames = animationNames.map((animationName, vIndex) => createFramesForAnimation(animationName, vIndex, frameSize));\n        const spriteData = {\n            frames: Object.assign({}, ...frames),\n            meta: {\n                scale,\n            },\n            animations: frames.reduce((acc, animationFrames, i) => {\n                acc[animationNames[i]] = Object.keys(animationFrames);\n                return acc;\n            }, {}),\n        };\n        // Create the SpriteSheet from data and image\n        const spriteSheet = new Spritesheet(BaseTexture.from(assetPath), spriteData);\n        // Generate all the Textures asynchronously\n        yield spriteSheet.parse();\n        const animation = new Container();\n        const switchAnimation = (animationName) => {\n            animation.children.length > 0 && animation.removeChildAt(0);\n            const animatedSprite = new AnimatedSprite(spriteSheet.animations[animationName]);\n            animation.addChild(animatedSprite);\n            if (animationSettings) {\n                Object.assign(animatedSprite, animationSettings[\"*\"], animationSettings[animationName]);\n                (animatedSprite === null || animatedSprite === void 0 ? void 0 : animatedSprite.autoPlay) && animatedSprite.play();\n            }\n        };\n        animation.switchAnimation = switchAnimation;\n        animation.spriteSheet = spriteSheet;\n        animation.play = () => { var _a; return (_a = animation.children[0]) === null || _a === void 0 ? void 0 : _a.play(); };\n        animation.nextFrame = () => {\n            const sprite = animation.children[0];\n            sprite.currentFrame =\n                sprite.currentFrame + 1 >= sprite.totalFrames\n                    ? 0\n                    : sprite.currentFrame + 1;\n        };\n        animation.prevFrame = () => {\n            const sprite = animation.children[0];\n            sprite.currentFrame =\n                sprite.currentFrame - 1 < 0\n                    ? sprite.totalFrames\n                    : sprite.currentFrame - 1;\n        };\n        // start by setting the idle animation\n        animation.switchAnimation(idleAnimationName);\n        return animation;\n    });\n}\n","export const cellSize = 100;\nexport const interactionRadius = 40;\nexport const CRTFilterVignetting = 0.67;\n","export var CellKind;\n(function (CellKind) {\n    CellKind[CellKind[\"floor\"] = 0] = \"floor\";\n    CellKind[CellKind[\"wall\"] = 1] = \"wall\";\n    CellKind[CellKind[\"door\"] = 2] = \"door\";\n})(CellKind || (CellKind = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Container } from \"pixi.js\";\nimport { createAnimation } from \"../sprites/createAnimation\";\nimport { cellSize } from \"../../constants\";\nimport { CellKind } from \"../types\";\n// Leave some play on the left cells to allow the character to go closer to the walls.\nconst LeftCellCollisionPlay = 20;\nexport class Character extends Container {\n    constructor(map, app) {\n        super();\n        this.map = map;\n        this.app = app;\n        this.kind = \"character\";\n        this.zIndex = 1;\n        this.speed = 5;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.animation = yield createAnimation({\n                frameSize: { width: 100, height: 120 },\n                assetPath: \"assets/character-sprite.png\",\n                animationNames: [\n                    \"walk-down\",\n                    \"walk-up\",\n                    \"walk-left\",\n                    \"walk-right\",\n                    \"idle\",\n                ],\n                idleAnimationName: \"idle\",\n                animationSettings: {\n                    \"*\": {\n                        animationSpeed: 0.1666,\n                        loop: true,\n                        autoPlay: true,\n                    },\n                    idle: {\n                        autoPlay: true,\n                        animationSpeed: 0.0666,\n                    },\n                },\n                scale: \"1.4\",\n            });\n            this.addChild(this.animation);\n            // offset the animation to center it\n            // Since we change the scale of the character, we need to offset the animation,\n            // otherwise the character width won't be equal to cellSize\n            this.animation.x = (cellSize - this.width) / 2;\n            this.stopWalking();\n            this.app.ticker.add(this.onTick.bind(this));\n        });\n    }\n    destroy() {\n        super.destroy();\n        this.app.ticker.remove(this.onTick.bind(this));\n    }\n    onTick(delta) {\n        if (!this.walkDirection) {\n            return;\n        }\n        switch (this.walkDirection) {\n            case \"up\":\n                this.move(0, this.speed * delta);\n                break;\n            case \"down\":\n                this.move(0, -this.speed * delta);\n                break;\n            case \"left\":\n                this.move(this.speed * delta, 0);\n                break;\n            case \"right\":\n                this.move(-this.speed * delta, 0);\n                break;\n        }\n    }\n    // Try to move according to the x and y deltas.\n    move(xDelta, yDelta) {\n        // Calculate the new position for the player.\n        // We invert the delta because we are moving the map, not the player\n        const newPlayerCoords = {\n            x: this.x + xDelta * -1,\n            y: this.y + yDelta * -1,\n        };\n        if (this.collidesWithWall(newPlayerCoords, xDelta, yDelta)) {\n            this.stopWalking();\n        }\n        else {\n            this.x = newPlayerCoords.x;\n            this.y = newPlayerCoords.y;\n            // update the zIndex as we move down the map\n            this.zIndex = Math.round(newPlayerCoords.y / cellSize);\n            this.map.container.y += yDelta;\n            this.map.container.x += xDelta;\n        }\n    }\n    collidesWithWall(newPlayerCoords, xDelta, yDelta) {\n        // Check if the player is between two cells (on the X axis)\n        const isBetweenVerticalCells = Math.floor(this.x / cellSize) !==\n            Math.floor((this.x + this.width) / cellSize);\n        const isBetweenHorizontalCells = Math.floor(this.y / cellSize) !==\n            Math.floor((this.y + this.height) / cellSize);\n        const cellsToCheck = [];\n        // if we are going down, we need to check the cells under the player (yDelta is negative)\n        if (yDelta < 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenVerticalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        // if we are going up, we need to check the cells above the player (yDelta is positive)\n        else if (yDelta > 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenVerticalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        // if we are going left, we need to check the cells on the left of the player (xDelta is positive)\n        else if (xDelta > 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenHorizontalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        // if we are going right, we need to check the cells on the right of the player (xDelta is negative)\n        else if (xDelta < 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenHorizontalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        return cellsToCheck.some((coords) => {\n            const cell = this.map.cells.find((cell) => cell.x === coords.x && cell.y === coords.y && cell.solid);\n            if (!cell) {\n                return false;\n            }\n            // special case if we are going left and the cell is a vertical wall\n            if (cell.kind === CellKind.wall &&\n                // all vertical walls are narrower than a regular cell size\n                (cell.properties.wallType.includes(\"vertical\") ||\n                    // horizontal corner walls are also narrower than a regular cell size\n                    cell.properties.wallType.includes(\"right-corner\")) &&\n                // only vertical-T walls are of regular cell size\n                cell.properties.wallType !== \"vertical-T\") {\n                // The player is allowed to go close to the wall, but not inside it, so we add this 10px margin\n                return newPlayerCoords.x < cell.x * cellSize + 10;\n            }\n            return cell.solid;\n        });\n    }\n    /**\n     * Start walking in the given direction\n     */\n    walk(direction) {\n        // if we are already walking in this direction, do nothing\n        if (this.walkDirection === direction) {\n            return;\n        }\n        // start by stopping any current walking\n        this.stopWalking();\n        // update walking direction\n        this.walkDirection = direction;\n        // change animation to\n        this.animation.switchAnimation(`walk-${direction}`);\n    }\n    /**\n     * Stop the walking.\n     */\n    stopWalking() {\n        this.walkDirection = undefined;\n        // switch back to the idle animation\n        this.animation.switchAnimation(\"idle\");\n    }\n}\n","export function random(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Sprite } from \"pixi.js\";\nimport { CellKind } from \"../types\";\nimport { cellSize } from \"../../constants\";\nimport { createAnimation } from \"../sprites/createAnimation\";\nimport { random } from \"../utils/math\";\nexport function parseMap(rawMap) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const cells = rawMap.reduce((map, row, y) => {\n            row.forEach((cell, x) => {\n                var _a;\n                const kind = cell;\n                map.push({\n                    kind,\n                    x,\n                    y,\n                    solid: kind === CellKind.wall || kind === CellKind.door,\n                    damage: 0,\n                }); // casting to avoid setting asset now\n                // add a floor cell under the wall (except if there is no cells on top or right side)\n                if ((kind === CellKind.wall || kind === CellKind.door) &&\n                    rawMap[y][x + 1] !== undefined &&\n                    ((_a = rawMap[y - 1]) === null || _a === void 0 ? void 0 : _a[x]) !== undefined) {\n                    map.push({\n                        kind: CellKind.floor,\n                        x,\n                        y,\n                        solid: false,\n                        damage: 0,\n                    });\n                }\n            });\n            return map;\n        }, []);\n        for (let i = 0; i < cells.length; i++) {\n            const cell = cells[i];\n            const previousWallCell = cells.find((c) => c.x === cell.x - 1 && c.y === cell.y && c.kind === CellKind.wall);\n            switch (cell.kind) {\n                case CellKind.wall:\n                    cell.properties = {\n                        wallType: findWallType(cell, cells),\n                    };\n                    cell.properties.windowType = findWindowType(cell.properties);\n                    // windows work in pair, so if the previous cell is a window, we need to use the same damage value\n                    if (cell.properties.windowType === \"right\") {\n                        cell.damage = previousWallCell.damage;\n                    }\n                    else if (cell.properties.windowType) {\n                        cell.damage = random(0, 3); // windows have random amount of damage\n                    }\n                    if (cell.properties.wallType.includes(\"window\")) {\n                        cell.asset = yield createAnimation({\n                            frameSize: { width: 100, height: 200 },\n                            assetPath: `assets/walls/${cell.properties.wallType}.png`,\n                            animationNames: [\"default\"],\n                            idleAnimationName: \"default\",\n                            animationSettings: {\n                                \"*\": {\n                                    animationSpeed: 0.1666,\n                                    loop: false,\n                                },\n                            },\n                        });\n                        for (let i = cell.damage; i > 0; i--) {\n                            cell.asset.nextFrame();\n                        }\n                        cell.asset.pivot.y = cell.asset.height / 2;\n                    }\n                    else {\n                        cell.asset = Sprite.from(`assets/walls/${cell.properties.wallType}.png`);\n                        cell.asset.anchor.y = cell.asset.height / 2;\n                    }\n                    cell.asset.zIndex = cell.y;\n                    break;\n                case CellKind.floor:\n                    cell.properties = { floorType: findFloorType(cell, cells) };\n                    cell.asset = Sprite.from(`assets/floors/${cell.properties.floorType}.png`);\n                    cell.asset.zIndex = -1;\n                    break;\n                case CellKind.door:\n                    cell.asset = yield createAnimation({\n                        frameSize: { width: 100, height: 200 },\n                        assetPath: \"assets/door.png\",\n                        animationNames: [\"open\", \"close\"],\n                        idleAnimationName: \"open\",\n                        animationSettings: {\n                            \"*\": {\n                                animationSpeed: 0.1666,\n                                loop: false,\n                            },\n                        },\n                    });\n                    cell.properties = {\n                        open: false,\n                        toggle: () => {\n                            const door = cell;\n                            if (!door.properties.open) {\n                                door.properties.open = true;\n                                door.solid = false;\n                                door.asset.switchAnimation(\"open\");\n                                door.asset.play();\n                            }\n                            else if (door.properties.open) {\n                                door.properties.open = false;\n                                door.solid = true;\n                                door.asset.switchAnimation(\"close\");\n                                door.asset.play();\n                            }\n                        },\n                    };\n                    cell.asset.zIndex = cell.y;\n                    cell.asset.pivot.y = cell.asset.height / 2;\n                    break;\n            }\n            cell.asset.x = cell.x * cellSize;\n            cell.asset.y = cell.y * cellSize;\n        }\n        return cells;\n    });\n}\nfunction findWindowType(wallProperties) {\n    if (wallProperties.wallType === \"horizontal-window-left\") {\n        return \"left\";\n    }\n    if (wallProperties.wallType === \"horizontal-window-right\") {\n        return \"right\";\n    }\n    return undefined;\n}\nfunction getSurroundingWalls(x, y, cells) {\n    const surroundingWalls = {\n        top: undefined,\n        bottom: undefined,\n        left: undefined,\n        right: undefined,\n        self: undefined,\n    };\n    cells.forEach((cell) => {\n        if (cell.kind !== CellKind.wall && cell.kind !== CellKind.door) {\n            return;\n        }\n        if (cell.x === x && cell.y === y) {\n            surroundingWalls.self = cell;\n        }\n        if (cell.x === x - 1 && cell.y === y) {\n            surroundingWalls.left = cell;\n        }\n        if (cell.x === x + 1 && cell.y === y) {\n            surroundingWalls.right = cell;\n        }\n        if (cell.x === x && cell.y === y - 1) {\n            surroundingWalls.top = cell;\n        }\n        if (cell.x === x && cell.y === y + 1) {\n            surroundingWalls.bottom = cell;\n        }\n    });\n    return surroundingWalls;\n}\nfunction findFloorType({ x, y }, cells) {\n    var _a, _b, _c, _d, _e;\n    const surroundingWalls = getSurroundingWalls(x, y, cells);\n    const topWallType = (_b = (_a = surroundingWalls.top) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.wallType;\n    const selfWallType = (_d = (_c = surroundingWalls.self) === null || _c === void 0 ? void 0 : _c.properties) === null || _d === void 0 ? void 0 : _d.wallType;\n    if (((_e = surroundingWalls.self) === null || _e === void 0 ? void 0 : _e.kind) === CellKind.door ||\n        (selfWallType === null || selfWallType === void 0 ? void 0 : selfWallType.includes(\"window\"))) {\n        return \"floor\";\n    }\n    if (surroundingWalls.self) {\n        if (((topWallType === null || topWallType === void 0 ? void 0 : topWallType.includes(\"horizontal\")) || topWallType === \"vertical-T\") &&\n            topWallType !== \"horizontal-right-corner-bottom\") {\n            return \"floor-shadow-corner\";\n        }\n        else {\n            return \"floor-shadow-left\";\n        }\n    }\n    if (surroundingWalls.top &&\n        ((topWallType === null || topWallType === void 0 ? void 0 : topWallType.includes(\"horizontal\")) ||\n            surroundingWalls.top.kind === CellKind.door)) {\n        // special case for right-corner-top assets, we want a corner shadow\n        if (topWallType === \"horizontal-right-corner-top\") {\n            return \"floor-shadow-top-left\";\n        }\n        return \"floor-shadow-top\";\n    }\n    return \"floor\";\n}\nfunction findWallType({ x, y }, cells) {\n    var _a;\n    const surroundingWalls = getSurroundingWalls(x, y, cells);\n    // if there is a wall to the left or right, it's a horizontal wall\n    if (surroundingWalls.left && surroundingWalls.right) {\n        if (surroundingWalls.bottom) {\n            return \"horizontal-T\";\n        }\n        const leftWallType = (_a = surroundingWalls.left\n            .properties) === null || _a === void 0 ? void 0 : _a.wallType;\n        // if there is a window on the left, we must add the right part of that window\n        if (leftWallType === \"horizontal-window-left\") {\n            return \"horizontal-window-right\";\n        }\n        // check if there is a wall on the right of the right wall. If so, it's a long wall and we can add a window\n        const isLongWall = !!cells.find((c) => surroundingWalls.right.x + 1 === c.x &&\n            surroundingWalls.right.y === c.y &&\n            c.kind === CellKind.wall);\n        // add random chances to have a window on a long horizontal wall\n        if (surroundingWalls.right.kind === CellKind.wall &&\n            isLongWall &&\n            random(0, 3) === 0) {\n            return \"horizontal-window-left\";\n        }\n        return \"horizontal\";\n    }\n    if (surroundingWalls.top && surroundingWalls.bottom) {\n        if (surroundingWalls.right) {\n            return \"vertical-T\";\n        }\n        return \"vertical\";\n    }\n    // if only a wall on the left\n    if (surroundingWalls.left) {\n        if (surroundingWalls.bottom) {\n            return \"horizontal-right-corner-bottom\";\n        }\n        else if (surroundingWalls.top) {\n            return \"horizontal-right-corner-top\";\n        }\n        return \"horizontal-right\";\n    }\n    // if only a wall on the right\n    if (surroundingWalls.right) {\n        if (surroundingWalls.bottom) {\n            return \"horizontal-left-corner-bottom\";\n        }\n        else if (surroundingWalls.top) {\n            return \"horizontal-left-corner-top\";\n        }\n        return \"horizontal-left\";\n    }\n    // if only a wall on the top\n    if (surroundingWalls.top) {\n        return \"vertical-bottom\";\n    }\n    // if only a wall on the bottom\n    if (surroundingWalls.bottom) {\n        return \"vertical-top\";\n    }\n    // if no walls around, it's a pillar\n    return \"pillar\";\n}\n","import { random } from \"../utils/math\";\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"North\"] = 0] = \"North\";\n    Direction[Direction[\"East\"] = 1] = \"East\";\n    Direction[Direction[\"South\"] = 2] = \"South\";\n    Direction[Direction[\"West\"] = 3] = \"West\";\n})(Direction || (Direction = {}));\nconst minimumSharedWidth = 3;\nconst minimumSharedHeight = 3;\nfunction generateRooms(count) {\n    return Array.from({ length: count }).map(() => ({\n        x: 0,\n        y: 0,\n        width: random(5, 10),\n        height: random(5, 10),\n    }));\n}\nfunction getOuterMostRoom(rooms, direction) {\n    switch (direction) {\n        // most north\n        case Direction.North:\n            return rooms.reduce((prev, curr) => {\n                if (curr.y < prev.y) {\n                    return curr;\n                }\n                return prev;\n            });\n        // most east\n        case Direction.East:\n            return rooms.reduce((prev, curr) => {\n                if (curr.x > prev.x) {\n                    return curr;\n                }\n                return prev;\n            });\n        // most south\n        case Direction.South:\n            return rooms.reduce((prev, curr) => {\n                if (curr.y > prev.y) {\n                    return curr;\n                }\n                return prev;\n            });\n        // most west\n        case Direction.West:\n            return rooms.reduce((prev, curr) => {\n                if (curr.x < prev.x) {\n                    return curr;\n                }\n                return prev;\n            });\n    }\n}\n// Generate a random shared X coordinate between two rooms\nfunction getSharedX(room1, room2) {\n    return random(Math.max(room1.x + 1, room2.x + 1), // adding +1 since we need a wall on the left side\n    Math.min(room1.x + room1.width - 2, room2.x + room2.width - 2) // removing -2 since we need a wall on the right side and we need to also remove 1 from the width\n    );\n}\n// Generate a random shared X coordinate between two rooms\nfunction getSharedY(room1, room2) {\n    return random(Math.max(room1.y + 1, room2.y + 1), Math.min(room1.y + room1.height - 2, room2.y + room2.height - 2));\n}\nfunction moveRoom(room, direction, outerMostRoom) {\n    const distanceToOuterMostRoom = random(1, 2);\n    const shortestWidth = Math.min(room.width, outerMostRoom.width);\n    const shortestHeight = Math.min(room.height, outerMostRoom.height);\n    let sharedX, sharedY;\n    // random to decide where to offset the room based on the previous one\n    const roomOffsetDirection = random(0, 1) === 1 ? 1 : -1;\n    switch (direction) {\n        // north\n        case Direction.North:\n            // move the room to the top of the outerMostRoom\n            room.y = outerMostRoom.y - room.height - distanceToOuterMostRoom;\n            // Offset the room to the left or right of the outerMostRoom\n            room.x =\n                outerMostRoom.x +\n                    random(0, shortestWidth - minimumSharedWidth) * roomOffsetDirection;\n            sharedX = getSharedX(room, outerMostRoom);\n            // create a corridor from the bottom of this room to the top of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: sharedX,\n                    y: room.y + room.height - 1,\n                },\n                to: {\n                    x: sharedX,\n                    y: outerMostRoom.y,\n                },\n                direction,\n            };\n            break;\n        // east\n        case Direction.East:\n            room.x = outerMostRoom.x + outerMostRoom.width + distanceToOuterMostRoom;\n            room.y =\n                outerMostRoom.y +\n                    random(0, shortestHeight - minimumSharedHeight) * roomOffsetDirection;\n            sharedY = getSharedY(room, outerMostRoom);\n            // create a corridor from the left of this room to the right of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: room.x,\n                    y: sharedY,\n                },\n                to: {\n                    x: outerMostRoom.x + outerMostRoom.width - 1,\n                    y: sharedY,\n                },\n                direction,\n            };\n            break;\n        // south\n        case Direction.South:\n            room.y = outerMostRoom.y + outerMostRoom.height + distanceToOuterMostRoom;\n            room.x =\n                outerMostRoom.x +\n                    random(0, shortestWidth - minimumSharedWidth) * roomOffsetDirection;\n            sharedX = getSharedX(room, outerMostRoom);\n            // create a corridor from the top of this room to the bottom of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: sharedX,\n                    y: room.y,\n                },\n                to: {\n                    x: sharedX,\n                    y: outerMostRoom.y + outerMostRoom.height - 1,\n                },\n                direction,\n            };\n            break;\n        // west\n        case Direction.West:\n            room.x = outerMostRoom.x - room.width - distanceToOuterMostRoom;\n            room.y =\n                outerMostRoom.y +\n                    random(0, shortestHeight - minimumSharedHeight) * roomOffsetDirection;\n            sharedY = getSharedY(room, outerMostRoom);\n            // create a corridor from the right of this room to the left of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: room.x + room.width - 1,\n                    y: sharedY,\n                },\n                to: {\n                    x: outerMostRoom.x,\n                    y: sharedY,\n                },\n                direction,\n            };\n            break;\n    }\n}\nexport function generateMap() {\n    // start by generating many rooms with random sizes, but with more height than width\n    const rooms = generateRooms(20);\n    // then move them away from each other until none of them overlap and\n    // they are between 1 and 2 cells away from each other,\n    rooms.slice(1).forEach((room, index) => {\n        const direction = random(0, 3); // 0: north, 1: east, 2: south, 3: west\n        const outerMostRoom = index === 0 ? rooms[0] : getOuterMostRoom(rooms, direction);\n        moveRoom(room, direction, outerMostRoom);\n    });\n    // then connect them with corridors.\n    // convert the rooms to a raw-map of 0 and 1\n    const westMostRoom = getOuterMostRoom(rooms, Direction.West);\n    const northMostRoom = getOuterMostRoom(rooms, Direction.North);\n    const startX = westMostRoom.x;\n    const startY = northMostRoom.y;\n    const map = [];\n    rooms.forEach((room) => {\n        for (let y = 0; y < room.height; y++) {\n            for (let x = 0; x < room.width; x++) {\n                const isWall = x === 0 || x === room.width - 1 || y === 0 || y === room.height - 1;\n                const mapX = Math.abs(startX - (room.x + x));\n                const mapY = Math.abs(startY - (room.y + y));\n                if (map[mapY] === undefined) {\n                    map[mapY] = [];\n                }\n                map[mapY][mapX] = isWall ? 1 : 0;\n            }\n        }\n    });\n    // now add the corridors\n    rooms\n        .filter((room) => !!room.corridor)\n        .forEach((room) => {\n        const { from, to, direction } = room.corridor;\n        const corridorLength = direction === Direction.North || direction === Direction.South\n            ? Math.abs(from.y - to.y)\n            : Math.abs(from.x - to.x);\n        for (let i = 0; i <= corridorLength; i++) {\n            let mapX = Math.abs(startX - from.x);\n            let mapY = Math.abs(startY - from.y);\n            if (direction === Direction.North) {\n                mapY += i;\n            }\n            else if (direction === Direction.East) {\n                mapX -= i;\n            }\n            else if (direction === Direction.South) {\n                mapY -= i;\n            }\n            else if (direction === Direction.West) {\n                mapX += i;\n            }\n            if (map[mapY] === undefined) {\n                map[mapY] = [];\n            }\n            map[mapY][mapX] = 0;\n            // surround the corridor with walls\n            if (direction === Direction.North || direction === Direction.South) {\n                map[mapY][mapX - 1] = 1;\n                map[mapY][mapX + 1] = 1;\n            }\n            else if (direction === Direction.East ||\n                direction === Direction.West) {\n                if (map[mapY - 1] === undefined) {\n                    map[mapY - 1] = [];\n                }\n                if (map[mapY + 1] === undefined) {\n                    map[mapY + 1] = [];\n                }\n                map[mapY - 1][mapX] = 1;\n                map[mapY + 1][mapX] = 1;\n            }\n        }\n        // if we just added a vertical corridor, add a door as well\n        if (direction === Direction.North || direction === Direction.South) {\n            const doorX = Math.abs(startX - to.x);\n            const doorY = Math.abs(startY - to.y);\n            map[doorY][doorX] = 2;\n        }\n    });\n    return {\n        map,\n        startCoords: {\n            x: Math.abs(startX - (rooms[0].x + Math.floor(rooms[0].width / 2))),\n            y: Math.abs(startY - (rooms[0].y + Math.floor(rooms[0].height / 2))),\n        },\n    };\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Container } from \"pixi.js\";\nimport { cellSize } from \"../../constants\";\nimport { parseMap } from \"./parsing\";\nimport { generateMap } from \"./generation\";\nexport class Map {\n    constructor() {\n        this.container = new Container();\n        this.entities = [];\n        const { map, startCoords } = generateMap();\n        this.rawMap = map;\n        this.startLocation = startCoords;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.cells = yield parseMap(this.rawMap);\n            this.cells.forEach((cell) => this.container.addChild(cell.asset));\n            this.container.sortableChildren = true;\n        });\n    }\n    destroy() {\n        this.container.destroy();\n        this.entities.forEach((entity) => entity.destroy());\n    }\n    addEntity(entity) {\n        this.entities.push(entity);\n        this.container.addChild(entity);\n    }\n    getEntities() {\n        return this.entities;\n    }\n    getCell(x, y) {\n        const xCell = Math.round(x / cellSize);\n        const yCell = Math.round(y / cellSize);\n        return this.cells.find((c) => c.x === xCell && c.y === yCell);\n    }\n    getCells(x, y, radius) {\n        const cells = this.cells.filter((c) => c.x >= Math.round((x - radius) / cellSize) &&\n            c.x <= Math.round((x + radius) / cellSize) &&\n            c.y >= Math.round((y - radius) / cellSize) &&\n            c.y <= Math.round((y + radius) / cellSize));\n        return cells;\n    }\n}\n","class UIApi {\n    constructor() {\n        this.eventCounter = 0;\n    }\n    listen(callback) {\n        this.listener = callback;\n    }\n    /**\n     * Displays a dialog with the given message.\n     *\n     * @returns A function that can be called to close the dialog.\n     */\n    showDialog(content, options) {\n        var _a;\n        const id = (this.eventCounter++).toString();\n        (_a = this.listener) === null || _a === void 0 ? void 0 : _a.call(this, \"new\", {\n            id,\n            type: \"dialog\",\n            content,\n            options,\n        });\n        const dismiss = () => this.closeDialog(id);\n        if (options === null || options === void 0 ? void 0 : options.dismissTimeout) {\n            setTimeout(dismiss, options.dismissTimeout);\n        }\n        return dismiss;\n    }\n    closeDialog(id) {\n        var _a;\n        (_a = this.listener) === null || _a === void 0 ? void 0 : _a.call(this, \"delete\", { id });\n    }\n}\nexport const uiAPI = new UIApi();\n","import { cellSize, interactionRadius } from \"../constants\";\nimport { uiAPI } from \"../react-ui/UIApi\";\nimport { CellKind } from \"./types\";\n/**\n * Class taking care of user interactions,\n * such as movements and interactions with the environment.\n */\nexport class InteractionManager {\n    constructor(character, map, app) {\n        this.character = character;\n        this.map = map;\n        this.app = app;\n        this.pressedKeys = new Set();\n        this.checkForInteractions = () => {\n            var _a;\n            const { x, y } = this.character;\n            const cells = this.map.getCells(x, y, interactionRadius);\n            const canOpenDoor = cells.some((cell) => cell.kind === CellKind.door);\n            const canFixWall = cells.some((cell) => cell.kind === CellKind.wall && cell.damage > 0);\n            // check for doors\n            if (canOpenDoor) {\n                if (this.dialogDismiss) {\n                    return;\n                }\n                this.dialogDismiss = uiAPI.showDialog({ key: \"E\", message: \"Interact\" }, { animation: \"fade\" });\n            }\n            else if (canFixWall) {\n                if (this.dialogDismiss) {\n                    return;\n                }\n                this.dialogDismiss = uiAPI.showDialog({ key: \"E\", message: \"Repair\" }, { animation: \"fade\" });\n            }\n            else {\n                (_a = this.dialogDismiss) === null || _a === void 0 ? void 0 : _a.call(this);\n                this.dialogDismiss = undefined;\n            }\n        };\n        window.addEventListener(\"keydown\", this.onKeyDown.bind(this));\n        window.addEventListener(\"keyup\", this.onKeyUp.bind(this));\n        this.app.ticker.add(this.onTick.bind(this));\n    }\n    destroy() {\n        this.app.ticker.remove(this.onTick.bind(this));\n    }\n    onTick() {\n        this.checkForInteractions();\n    }\n    checkKeysPressed() {\n        const key = this.pressedKeys.values().next().value;\n        switch (key) {\n            case \"e\":\n                this.interact();\n                break;\n            case \"ArrowUp\":\n                this.character.walk(\"up\");\n                break;\n            case \"ArrowDown\":\n                this.character.walk(\"down\");\n                break;\n            case \"ArrowLeft\":\n                this.character.walk(\"left\");\n                break;\n            case \"ArrowRight\":\n                this.character.walk(\"right\");\n                break;\n            default:\n                this.character.stopWalking();\n                break;\n        }\n    }\n    interact() {\n        const { x, y } = this.character;\n        const cells = this.map.getCells(x, y, interactionRadius);\n        const door = cells.find((cell) => cell.kind === CellKind.door);\n        const wall = cells.find((cell) => cell.kind === CellKind.wall && cell.damage > 0);\n        // open or close the door\n        if (door &&\n            // can't close the door if the player is in the way\n            !(door.x === Math.round(x / cellSize) &&\n                // add 20 of play to using the door from quite close\n                door.y === Math.round((y + 20) / cellSize) &&\n                Math.abs(door.y * cellSize - y) < cellSize / 2)) {\n            door.properties.toggle();\n        }\n        else if (wall) {\n            wall.asset.prevFrame();\n            wall.damage--;\n        }\n    }\n    onKeyDown(event) {\n        if (!event.key.includes(\"Arrow\") && event.key !== \"e\") {\n            return;\n        }\n        this.pressedKeys.add(event.key);\n        this.checkKeysPressed();\n    }\n    onKeyUp(event) {\n        this.pressedKeys.delete(event.key);\n        this.checkKeysPressed();\n    }\n}\n","export function distance(x1, y1, x2, y2) {\n    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n}\n","export function findPath(startCell, target, map, maxLength) {\n    const endCell = map.getCell(target.x - 1, target.y - 1);\n    function explore(toExplore, exploredMap) {\n        const cell = toExplore.pop();\n        if (!cell || exploredMap[cell.y][cell.x] > maxLength) {\n            return false;\n        }\n        const { x, y } = cell;\n        const previousCellValue = exploredMap[y][x];\n        // if target is found\n        if (endCell.x === x && endCell.y === y) {\n            return true;\n        }\n        const newCellValue = previousCellValue + 1;\n        if (newCellValue > maxLength) {\n            return explore(toExplore, exploredMap);\n        }\n        // explore top cell\n        if (y - 1 >= 0 && exploredMap[y - 1][x] === 0) {\n            exploredMap[y - 1][x] = newCellValue;\n            toExplore.push({ y: y - 1, x });\n        }\n        // explore bottom cell\n        if (y + 1 < exploredMap.length && exploredMap[y + 1][x] === 0) {\n            exploredMap[y + 1][x] = newCellValue;\n            toExplore.push({ y: y + 1, x });\n        }\n        // explore left cell\n        if (x - 1 >= 0 && exploredMap[y][x - 1] === 0) {\n            exploredMap[y][x - 1] = newCellValue;\n            toExplore.push({ y, x: x - 1 });\n        }\n        // explore right cell\n        if (x + 1 < exploredMap[y].length && exploredMap[y][x + 1] === 0) {\n            exploredMap[y][x + 1] = newCellValue;\n            toExplore.push({ y, x: x + 1 });\n        }\n        return explore(toExplore, exploredMap);\n    }\n    const exploredMap = [];\n    map.cells.forEach((cell) => {\n        if (!exploredMap[cell.y]) {\n            exploredMap[cell.y] = [];\n        }\n        if (exploredMap[cell.y][cell.x] === undefined) {\n            exploredMap[cell.y][cell.x] = cell.solid ? -1 : 0;\n        }\n    });\n    exploredMap[startCell.y][startCell.x] = 2; // start at 2\n    const found = explore([startCell], exploredMap);\n    if (!found) {\n        return [];\n    }\n    const path = [];\n    let x = endCell.x, y = endCell.y;\n    do {\n        path.unshift({ x, y });\n        // go left if the value is current - 1\n        if (x - 1 >= 0 && exploredMap[y][x - 1] === exploredMap[y][x] - 1) {\n            x--;\n        }\n        // go right if the value is current + 1\n        else if (x + 1 < exploredMap[y].length &&\n            exploredMap[y][x + 1] === exploredMap[y][x] - 1) {\n            x++;\n        }\n        // go up if the value is current + 1\n        else if (y - 1 >= 0 && exploredMap[y - 1][x] === exploredMap[y][x] - 1) {\n            y--;\n        }\n        // go down if the value is current + 1\n        else if (y + 1 < exploredMap.length &&\n            exploredMap[y + 1][x] === exploredMap[y][x] - 1) {\n            y++;\n        }\n        else {\n            break;\n        }\n        // eslint-disable-next-line no-constant-condition\n    } while (true);\n    return path;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Container } from \"pixi.js\";\nimport { createAnimation } from \"../sprites/createAnimation\";\nimport { distance } from \"../../utils/distance\";\nimport { findPath } from \"../../utils/pathFinding\";\nimport { cellSize } from \"../../constants\";\n/**\n * Base class for all enemies.\n */\nexport class Enemy extends Container {\n    constructor(map, app, speed, detectionRange = 200, hitRange = 50) {\n        super();\n        this.map = map;\n        this.app = app;\n        this.speed = speed;\n        this.detectionRange = detectionRange;\n        this.hitRange = hitRange;\n        this.kind = \"enemy\";\n        this.app.ticker.add(this.onTick.bind(this));\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.animation = yield createAnimation({\n                frameSize: { width: 100, height: 100 },\n                assetPath: \"assets/enemy-sprite.png\",\n                animationNames: [\n                    \"walk-down\",\n                    \"walk-up\",\n                    \"walk-left\",\n                    \"walk-right\",\n                    \"idle\",\n                ],\n                idleAnimationName: \"idle\",\n                animationSettings: {\n                    \"*\": {\n                        animationSpeed: 0.1666,\n                        loop: true,\n                        autoPlay: true,\n                    },\n                    idle: {\n                        autoPlay: true,\n                        animationSpeed: 0.0666,\n                    },\n                },\n                scale: \"1\",\n            });\n            this.addChild(this.animation);\n            // offset the animation to center it\n            // Since we change the scale of the character, we need to offset the animation,\n            // otherwise the character width won't be equal to cellSize\n            this.animation.x = (cellSize - this.width) / 2;\n            // initialize the character to be standing\n            this.stopWalking();\n        });\n    }\n    destroy() {\n        super.destroy();\n        this.app.ticker.remove(this.onTick.bind(this));\n    }\n    onTick() {\n        var _a;\n        // if there is path to visit, start walking\n        if (((_a = this.path) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            this.walkOnPath();\n        }\n        for (const entity of this.map.getEntities()) {\n            // close enough to do damage\n            const distanceToEntity = distance(this.x, this.y, entity.x, entity.y);\n            if (entity.kind === \"character\" && distanceToEntity < this.hitRange) {\n                // do something on hit\n            }\n            // close enough to start following\n            else if (entity.kind === \"character\" &&\n                distanceToEntity < this.detectionRange &&\n                // but not close enough to hit\n                distanceToEntity > this.hitRange &&\n                // and if the previous path is wrong (end of path is not the entity)\n                (!this.path ||\n                    this.path.length === 0 ||\n                    (this.path[this.path.length - 1].x !==\n                        Math.round(entity.x / cellSize) &&\n                        this.path[this.path.length - 1].y !==\n                            Math.round(entity.y / cellSize)))) {\n                const myCell = this.map.getCell(this.x - 1, this.y - 1);\n                this.path = findPath(myCell, entity, this.map, \n                /* maxLength */ distanceToEntity / cellSize + 4);\n                return;\n            }\n        }\n    }\n    walkOnPath() {\n        const currentPath = this.path[0];\n        const targetX = currentPath.x * cellSize;\n        const targetY = currentPath.y * cellSize;\n        const xDelta = targetX - this.x;\n        const yDelta = targetY - this.y;\n        const distanceToTarget = distance(this.x, this.y, targetX, targetY);\n        // Check which direction we are moving the most\n        if (Math.abs(xDelta) > Math.abs(yDelta)) {\n            xDelta > 0 ? this.walk(\"right\") : this.walk(\"left\");\n        }\n        else {\n            yDelta > 0 ? this.walk(\"down\") : this.walk(\"up\");\n        }\n        if (distanceToTarget < this.hitRange) {\n            this.x = targetX;\n            this.y = targetY;\n            this.path.shift();\n            this.stopWalking();\n        }\n        else {\n            this.x += (xDelta / distanceToTarget) * this.speed;\n            this.y += (yDelta / distanceToTarget) * this.speed;\n        }\n    }\n    walk(direction) {\n        // if we are already walking in this direction, do nothing\n        if (this.walkDirection === direction) {\n            return;\n        }\n        // start by stopping any current walking\n        this.stopWalking();\n        // update walking direction\n        this.walkDirection = direction;\n        // change animation to\n        this.animation.switchAnimation(`walk-${direction}`);\n    }\n    stopWalking() {\n        this.walkDirection = undefined;\n        // switch back to the idle animation\n        this.animation.switchAnimation(\"idle\");\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Application } from \"pixi.js\";\nimport { CRTFilter } from \"@pixi/filter-crt\";\nimport { Character } from \"./entities/character\";\nimport { Map } from \"./map/map\";\nimport { CRTFilterVignetting, cellSize } from \"../constants\";\nimport { InteractionManager } from \"./interactionManager\";\nimport { uiAPI } from \"../react-ui/UIApi\";\nimport { Enemy } from \"./entities/enemy\";\nexport const app = new Application({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    resizeTo: window,\n    backgroundColor: \"#000000\",\n});\nexport class GameCore {\n    constructor() {\n        // create the map\n        this.map = new Map();\n        app.stage.filterArea = app.screen;\n        const crtFilter = new CRTFilter({ vignetting: 1 });\n        app.stage.filters = [crtFilter];\n        // create an animation to make the vignetting effect\n        const interval = setInterval(() => {\n            crtFilter.vignetting -= 0.01;\n            if (crtFilter.vignetting < CRTFilterVignetting) {\n                clearInterval(interval);\n                uiAPI.showDialog({ message: \"Uh.. Where am I?\" }, { dismissTimeout: 2000, animation: \"text\" });\n            }\n        }, 50);\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // init the map\n            yield this.map.init();\n            // create and init the character\n            this.character = new Character(this.map, app);\n            yield this.character.init();\n            this.character.x = this.map.startLocation.x * cellSize;\n            this.character.y = this.map.startLocation.y * cellSize;\n            // add the character to the map\n            this.map.addEntity(this.character);\n            // create and init an enemy\n            const enemy = new Enemy(this.map, app, \n            /* speed */ 2, \n            /* detectionRange */ 300);\n            yield enemy.init();\n            // offset slightly the enemy to the character start\n            enemy.x = this.map.startLocation.x * cellSize;\n            enemy.y = this.map.startLocation.y * cellSize;\n            // add the character to the map\n            this.map.addEntity(enemy);\n            const screenCenter = {\n                x: app.view.width / 2,\n                y: app.view.height / 2,\n            };\n            // center the map on the character\n            this.map.container.x = screenCenter.x - this.character.x;\n            this.map.container.y = screenCenter.y - this.character.y;\n            // add the map to the stage.\n            app.stage.addChild(this.map.container);\n            // create the interaction manager\n            this.interactionManager = new InteractionManager(this.character, this.map, app);\n        });\n    }\n    destroy() {\n        this.interactionManager.destroy();\n        this.map.destroy();\n    }\n}\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./UIController.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./UIController.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./Dialog.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./Dialog.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import * as React from \"react\";\nimport \"./UIController.module.css\";\nimport { uiAPI } from \"./UIApi\";\nimport { Dialog } from \"./components/Dialog\";\nconst componentMap = {\n    dialog: Dialog,\n};\nexport function UIController() {\n    const [activeElements, setActiveElements] = React.useState([]);\n    React.useEffect(() => {\n        uiAPI.listen((event, data) => {\n            switch (event) {\n                case \"new\":\n                    setActiveElements((prev) => [...prev, data]);\n                    break;\n                case \"delete\":\n                    setActiveElements((prev) => prev.filter((element) => element.id !== data.id));\n            }\n        });\n    }, [uiAPI]);\n    return (React.createElement(\"div\", { className: \"ui-controller\" }, activeElements.map((element) => {\n        const Component = componentMap[element.type];\n        return React.createElement(Component, Object.assign({ key: element.id }, element));\n    })));\n}\n","import * as React from \"react\";\nimport \"./Dialog.module.css\";\nexport function Dialog({ content, options }) {\n    return (React.createElement(\"div\", { className: `dialog ${(options === null || options === void 0 ? void 0 : options.animation) === \"fade\" ? \"dialog-animation-fade\" : \"\"}` },\n        content.key && React.createElement(\"kbd\", { className: \"dialog-key\" }, content.key),\n        React.createElement(\"div\", { className: `dialog-content ${(options === null || options === void 0 ? void 0 : options.animation) === \"text\" ? \"dialog-animation-text\" : \"\"}` }, content.message)));\n}\n","import * as React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { App } from \"./App\";\ncreateRoot(document.getElementById(\"root\")).render(React.createElement(App, null));\n","import * as React from \"react\";\nimport \"./App.module.css\";\nimport { GameCore, app } from \"./core/core\";\nimport { UIController } from \"./react-ui/UIController\";\nexport function App() {\n    React.useEffect(() => {\n        // The application will create a canvas element for you that you\n        // can then insert into the DOM\n        const wrapper = document.createElement(\"div\");\n        wrapper.className = \"game-canvas\";\n        wrapper.appendChild(app.view);\n        document.body.appendChild(wrapper);\n        const controller = new GameCore();\n        controller.init();\n        return controller.destroy;\n    }, []);\n    return React.createElement(UIController, null);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb_app\"] = self[\"webpackChunkweb_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [814], () => (__webpack_require__(354)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","___CSS_LOADER_EXPORT___","push","module","id","locals","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","createAnimation","frameSize","animationNames","assetPath","idleAnimationName","animationSettings","scale","thisArg","this","_arguments","generator","frames","map","animationName","vIndex","i","frame","x","width","y","height","w","h","sourceSize","createFramesForAnimation","spriteData","Object","assign","meta","animations","reduce","acc","animationFrames","keys","spriteSheet","from","parse","animation","switchAnimation","children","length","removeChildAt","animatedSprite","addChild","autoPlay","play","_a","nextFrame","sprite","currentFrame","totalFrames","prevFrame","P","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","cellSize","CellKind","Character","constructor","app","super","kind","zIndex","speed","init","animationSpeed","loop","idle","stopWalking","ticker","add","onTick","bind","destroy","remove","delta","walkDirection","move","xDelta","yDelta","newPlayerCoords","collidesWithWall","Math","round","container","isBetweenVerticalCells","floor","isBetweenHorizontalCells","cellsToCheck","ceil","some","coords","cell","cells","find","solid","wall","properties","wallType","includes","walk","direction","undefined","random","min","max","Direction","getSurroundingWalls","surroundingWalls","top","bottom","left","right","self","forEach","door","findFloorType","_b","_c","_d","_e","topWallType","selfWallType","findWallType","isLongWall","c","getOuterMostRoom","rooms","North","prev","curr","East","South","West","getSharedX","room1","room2","getSharedY","Map","entities","startCoords","Array","slice","room","index","outerMostRoom","distanceToOuterMostRoom","shortestWidth","shortestHeight","sharedX","sharedY","roomOffsetDirection","corridor","to","moveRoom","westMostRoom","northMostRoom","startX","startY","isWall","mapX","abs","mapY","filter","corridorLength","doorX","doorY","generateMap","rawMap","startLocation","row","damage","previousWallCell","windowType","wallProperties","asset","pivot","anchor","floorType","open","toggle","parseMap","sortableChildren","entity","addEntity","getEntities","getCell","xCell","yCell","getCells","radius","uiAPI","eventCounter","listen","callback","listener","showDialog","content","toString","call","type","dismiss","closeDialog","dismissTimeout","setTimeout","InteractionManager","character","pressedKeys","Set","checkForInteractions","canOpenDoor","canFixWall","dialogDismiss","key","message","window","addEventListener","onKeyDown","onKeyUp","checkKeysPressed","values","interact","event","delete","distance","x1","y1","x2","y2","sqrt","pow","findPath","startCell","target","maxLength","endCell","exploredMap","found","explore","toExplore","pop","previousCellValue","newCellValue","path","unshift","Enemy","detectionRange","hitRange","walkOnPath","distanceToEntity","myCell","currentPath","targetX","targetY","distanceToTarget","shift","innerWidth","innerHeight","resizeTo","backgroundColor","GameCore","stage","filterArea","screen","crtFilter","vignetting","filters","interval","setInterval","clearInterval","enemy","screenCenter","view","interactionManager","componentMap","dialog","className","UIController","activeElements","setActiveElements","data","element","Component","document","getElementById","render","wrapper","createElement","appendChild","body","controller","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","nc","__webpack_exports__"],"sourceRoot":""}