{"version":3,"file":"index.bundle.js","mappings":"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","sources":["webpack://web-app/webpack/runtime/chunk loaded","webpack://web-app/./src/App.module.css","webpack://web-app/./src/react-ui/UIController.module.css","webpack://web-app/./src/react-ui/components/Dialog.module.css","webpack://web-app/./src/App.module.css?1bbe","webpack://web-app/./src/core/sprites/createAnimation.ts","webpack://web-app/./src/constants.ts","webpack://web-app/./src/core/types.ts","webpack://web-app/./src/core/entities/character.ts","webpack://web-app/./src/core/utils/math.ts","webpack://web-app/./src/core/map/parsing.ts","webpack://web-app/./src/core/map/generation.ts","webpack://web-app/./src/core/map/map.tsx","webpack://web-app/./src/react-ui/UIApi.ts","webpack://web-app/./src/core/interactionManager.ts","webpack://web-app/./src/utils/distance.ts","webpack://web-app/./src/utils/pathFinding.ts","webpack://web-app/./src/core/entities/enemy.ts","webpack://web-app/./src/core/core.ts","webpack://web-app/./src/react-ui/UIController.module.css?0a8a","webpack://web-app/./src/react-ui/components/Dialog.module.css?95be","webpack://web-app/./src/react-ui/UIController.tsx","webpack://web-app/./src/react-ui/components/Dialog.tsx","webpack://web-app/./src/index.tsx","webpack://web-app/./src/App.tsx","webpack://web-app/webpack/bootstrap","webpack://web-app/webpack/runtime/compat get default export","webpack://web-app/webpack/runtime/define property getters","webpack://web-app/webpack/runtime/global","webpack://web-app/webpack/runtime/hasOwnProperty shorthand","webpack://web-app/webpack/runtime/make namespace object","webpack://web-app/webpack/runtime/node module decorator","webpack://web-app/webpack/runtime/jsonp chunk loading","webpack://web-app/webpack/runtime/nonce","webpack://web-app/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.game-canvas {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/App.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,MAAM;EACN,OAAO;AACT\",\"sourcesContent\":[\".game-canvas {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"game-canvas\": `game-canvas`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.ui-controller {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/react-ui/UIController.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,MAAM;EACN,OAAO;AACT\",\"sourcesContent\":[\".ui-controller {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  top: 0;\\n  left: 0;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"ui-controller\": `ui-controller`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.dialog {\n  position: absolute;\n  top: 45%;\n  left: 50%;\n  transform: translateX(-25%);\n  z-index: 5;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  color: white;\n  display: flex;\n  flex-direction: row;\n}\n\n@keyframes text {\n  from {\n    width: 0%;\n  }\n  to {\n    width: 100%;\n  }\n}\n\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.dialog-key {\n  width: 50px;\n  height: 50px;\n  text-align: center;\n  font-weight: bold;\n  font-size: 40px;\n  border: 3px gold solid;\n}\n\n.dialog-content {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 10px;\n  font-size: 25px;\n  font-family: pixel-font, sans-serif;\n}\n\n.dialog-animation-text {\n  animation-name: text;\n  animation-duration: 1s;\n  animation-timing-function: linear;\n}\n\n.dialog-animation-fade {\n  animation-name: fadeIn;\n  animation-duration: 200ms;\n  animation-timing-function: linear;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/react-ui/components/Dialog.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,2BAA2B;EAC3B,UAAU;EACV,oCAAoC;EACpC,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE;IACE,SAAS;EACX;EACA;IACE,WAAW;EACb;AACF;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,iBAAiB;EACjB,eAAe;EACf,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;EAChB,uBAAuB;EACvB,mBAAmB;EACnB,aAAa;EACb,eAAe;EACf,mCAAmC;AACrC;;AAEA;EACE,oBAAoB;EACpB,sBAAsB;EACtB,iCAAiC;AACnC;;AAEA;EACE,sBAAsB;EACtB,yBAAyB;EACzB,iCAAiC;AACnC\",\"sourcesContent\":[\".dialog {\\n  position: absolute;\\n  top: 45%;\\n  left: 50%;\\n  transform: translateX(-25%);\\n  z-index: 5;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  align-items: center;\\n  color: white;\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n@keyframes text {\\n  from {\\n    width: 0%;\\n  }\\n  to {\\n    width: 100%;\\n  }\\n}\\n\\n@keyframes fadeIn {\\n  0% {\\n    opacity: 0;\\n  }\\n  100% {\\n    opacity: 1;\\n  }\\n}\\n\\n.dialog-key {\\n  width: 50px;\\n  height: 50px;\\n  text-align: center;\\n  font-weight: bold;\\n  font-size: 40px;\\n  border: 3px gold solid;\\n}\\n\\n.dialog-content {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  padding: 10px;\\n  font-size: 25px;\\n  font-family: pixel-font, sans-serif;\\n}\\n\\n.dialog-animation-text {\\n  animation-name: text;\\n  animation-duration: 1s;\\n  animation-timing-function: linear;\\n}\\n\\n.dialog-animation-fade {\\n  animation-name: fadeIn;\\n  animation-duration: 200ms;\\n  animation-timing-function: linear;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"dialog\": `dialog`,\n\t\"dialog-key\": `dialog-key`,\n\t\"dialog-content\": `dialog-content`,\n\t\"dialog-animation-text\": `dialog-animation-text`,\n\t\"text\": `text`,\n\t\"dialog-animation-fade\": `dialog-animation-fade`,\n\t\"fadeIn\": `fadeIn`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./App.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./App.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AnimatedSprite, BaseTexture, Spritesheet, Container, } from \"pixi.js\";\nfunction createFramesForAnimation(animationName, vIndex, frameSize) {\n    const frames = {};\n    for (let i = 0; i < 4; i++) {\n        frames[`${animationName}${i}`] = {\n            frame: {\n                x: i * frameSize.width,\n                y: vIndex * frameSize.height,\n                w: frameSize.width,\n                h: frameSize.height,\n            },\n            sourceSize: { w: frameSize.width, h: frameSize.height },\n        };\n    }\n    return frames;\n}\nexport function createAnimation({ frameSize, animationNames, assetPath, idleAnimationName, animationSettings, scale = \"1\", }) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const frames = animationNames.map((animationName, vIndex) => createFramesForAnimation(animationName, vIndex, frameSize));\n        const spriteData = {\n            frames: Object.assign({}, ...frames),\n            meta: {\n                scale,\n            },\n            animations: frames.reduce((acc, animationFrames, i) => {\n                acc[animationNames[i]] = Object.keys(animationFrames);\n                return acc;\n            }, {}),\n        };\n        // Create the SpriteSheet from data and image\n        const spriteSheet = new Spritesheet(BaseTexture.from(assetPath), spriteData);\n        // Generate all the Textures asynchronously\n        yield spriteSheet.parse();\n        const animation = new Container();\n        const switchAnimation = (animationName) => {\n            animation.children.length > 0 && animation.removeChildAt(0);\n            const animatedSprite = new AnimatedSprite(spriteSheet.animations[animationName]);\n            animation.addChild(animatedSprite);\n            if (animationSettings) {\n                Object.assign(animatedSprite, animationSettings[\"*\"], animationSettings[animationName]);\n                (animatedSprite === null || animatedSprite === void 0 ? void 0 : animatedSprite.autoPlay) && animatedSprite.play();\n            }\n        };\n        animation.switchAnimation = switchAnimation;\n        animation.spriteSheet = spriteSheet;\n        animation.play = () => { var _a; return (_a = animation.children[0]) === null || _a === void 0 ? void 0 : _a.play(); };\n        // start by setting the idle animation\n        animation.switchAnimation(idleAnimationName);\n        return animation;\n    });\n}\n","export const cellSize = 100;\nexport const interactionRadius = 40;\nexport const CRTFilterVignetting = 0.67;\n","export var CellKind;\n(function (CellKind) {\n    CellKind[CellKind[\"floor\"] = 0] = \"floor\";\n    CellKind[CellKind[\"wall\"] = 1] = \"wall\";\n    CellKind[CellKind[\"door\"] = 2] = \"door\";\n})(CellKind || (CellKind = {}));\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Container } from \"pixi.js\";\nimport { createAnimation } from \"../sprites/createAnimation\";\nimport { cellSize } from \"../../constants\";\nimport { CellKind } from \"../types\";\n// Leave some play on the left cells to allow the character to go closer to the walls.\nconst LeftCellCollisionPlay = 20;\nexport class Character extends Container {\n    constructor(map, app) {\n        super();\n        this.map = map;\n        this.app = app;\n        this.kind = \"character\";\n        this.zIndex = 1;\n        this.speed = 5;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.animation = yield createAnimation({\n                frameSize: { width: 100, height: 120 },\n                assetPath: \"assets/character-sprite.png\",\n                animationNames: [\n                    \"walk-down\",\n                    \"walk-up\",\n                    \"walk-left\",\n                    \"walk-right\",\n                    \"idle\",\n                ],\n                idleAnimationName: \"idle\",\n                animationSettings: {\n                    \"*\": {\n                        animationSpeed: 0.1666,\n                        loop: true,\n                        autoPlay: true,\n                    },\n                    idle: {\n                        autoPlay: true,\n                        animationSpeed: 0.0666,\n                    },\n                },\n                scale: \"1.4\",\n            });\n            this.addChild(this.animation);\n            // offset the animation to center it\n            // Since we change the scale of the character, we need to offset the animation,\n            // otherwise the character width won't be equal to cellSize\n            this.animation.x = (cellSize - this.width) / 2;\n            this.stopWalking();\n            this.app.ticker.add(this.onTick.bind(this));\n        });\n    }\n    destroy() {\n        super.destroy();\n        this.app.ticker.remove(this.onTick.bind(this));\n    }\n    onTick(delta) {\n        if (!this.walkDirection) {\n            return;\n        }\n        switch (this.walkDirection) {\n            case \"up\":\n                this.move(0, this.speed * delta);\n                break;\n            case \"down\":\n                this.move(0, -this.speed * delta);\n                break;\n            case \"left\":\n                this.move(this.speed * delta, 0);\n                break;\n            case \"right\":\n                this.move(-this.speed * delta, 0);\n                break;\n        }\n    }\n    // Try to move according to the x and y deltas.\n    move(xDelta, yDelta) {\n        // Calculate the new position for the player.\n        // We invert the delta because we are moving the map, not the player\n        const newPlayerCoords = {\n            x: this.x + xDelta * -1,\n            y: this.y + yDelta * -1,\n        };\n        if (this.collidesWithWall(newPlayerCoords, xDelta, yDelta)) {\n            this.stopWalking();\n        }\n        else {\n            this.x = newPlayerCoords.x;\n            this.y = newPlayerCoords.y;\n            // update the zIndex as we move down the map\n            this.zIndex = Math.round(newPlayerCoords.y / cellSize);\n            this.map.container.y += yDelta;\n            this.map.container.x += xDelta;\n        }\n    }\n    collidesWithWall(newPlayerCoords, xDelta, yDelta) {\n        // Check if the player is between two cells (on the X axis)\n        const isBetweenVerticalCells = Math.floor(this.x / cellSize) !==\n            Math.floor((this.x + this.width) / cellSize);\n        const isBetweenHorizontalCells = Math.floor(this.y / cellSize) !==\n            Math.floor((this.y + this.height) / cellSize);\n        const cellsToCheck = [];\n        // if we are going down, we need to check the cells under the player (yDelta is negative)\n        if (yDelta < 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                y: Math.floor((newPlayerCoords.y + this.height) / cellSize),\n            });\n            if (isBetweenVerticalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                    y: Math.floor((newPlayerCoords.y + this.height) / cellSize),\n                });\n            }\n        }\n        // if we are going up, we need to check the cells above the player (yDelta is positive)\n        else if (yDelta > 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenVerticalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        // if we are going left, we need to check the cells on the left of the player (xDelta is positive)\n        else if (xDelta > 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenHorizontalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + LeftCellCollisionPlay) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        // if we are going right, we need to check the cells on the right of the player (xDelta is negative)\n        else if (xDelta < 0) {\n            cellsToCheck.push({\n                x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n            });\n            if (isBetweenHorizontalCells) {\n                cellsToCheck.push({\n                    x: Math.floor((newPlayerCoords.x + this.width) / cellSize),\n                    y: Math.ceil((newPlayerCoords.y - this.height / 2) / cellSize),\n                });\n            }\n        }\n        return cellsToCheck.some((coords) => {\n            const cell = this.map.cells.find((cell) => cell.x === coords.x && cell.y === coords.y && cell.solid);\n            // special case if we are going left and the cell is a vertical wall\n            if (cell &&\n                cell.kind === CellKind.wall &&\n                // all vertical walls are narrower than a regular cell size\n                (cell.properties.wallType.includes(\"vertical\") ||\n                    // horizontal corner walls are also narrower than a regular cell size\n                    cell.properties.wallType.includes(\"right-corner\")) &&\n                // only vertical-T walls are of regular cell size\n                cell.properties.wallType !== \"vertical-T\") {\n                // The player is allowed to go close to the wall, but not inside it, so we add this 10px margin\n                return newPlayerCoords.x < cell.x * cellSize + 10;\n            }\n            return cell === null || cell === void 0 ? void 0 : cell.solid;\n        });\n    }\n    /**\n     * Start walking in the given direction\n     */\n    walk(direction) {\n        // if we are already walking in this direction, do nothing\n        if (this.walkDirection === direction) {\n            return;\n        }\n        // start by stopping any current walking\n        this.stopWalking();\n        // update walking direction\n        this.walkDirection = direction;\n        // change animation to\n        this.animation.switchAnimation(`walk-${direction}`);\n    }\n    /**\n     * Stop the walking.\n     */\n    stopWalking() {\n        this.walkDirection = undefined;\n        // switch back to the idle animation\n        this.animation.switchAnimation(\"idle\");\n    }\n}\n","export function random(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Sprite } from \"pixi.js\";\nimport { CellKind } from \"../types\";\nimport { cellSize } from \"../../constants\";\nimport { createAnimation } from \"../sprites/createAnimation\";\nimport { random } from \"../utils/math\";\nexport function parseMap(rawMap) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const cells = rawMap.reduce((map, row, y) => {\n            row.forEach((cell, x) => {\n                var _a;\n                const kind = cell;\n                map.push({\n                    kind,\n                    x,\n                    y,\n                    solid: kind === CellKind.wall || kind === CellKind.door,\n                }); // casting to avoid setting asset now\n                // add a floor cell under the wall (except if there is no cells on the right side)\n                if ((kind === CellKind.wall || kind === CellKind.door) &&\n                    rawMap[y][x + 1] !== undefined &&\n                    ((_a = rawMap[y - 1]) === null || _a === void 0 ? void 0 : _a[x]) !== undefined) {\n                    map.push({\n                        kind: CellKind.floor,\n                        x,\n                        y,\n                        solid: false,\n                    });\n                }\n            });\n            return map;\n        }, []);\n        for (let i = 0; i < cells.length; i++) {\n            const cell = cells[i];\n            switch (cell.kind) {\n                case CellKind.wall:\n                    cell.properties = { wallType: findWallType(cell, cells) };\n                    cell.asset = Sprite.from(`assets/walls/${cell.properties.wallType}.png`);\n                    cell.asset.zIndex = cell.y;\n                    cell.asset.anchor.y = cell.asset.height / 2;\n                    break;\n                case CellKind.floor:\n                    cell.properties = { floorType: findFloorType(cell, cells) };\n                    cell.asset = Sprite.from(`assets/floors/${cell.properties.floorType}.png`);\n                    cell.asset.zIndex = -1;\n                    break;\n                case CellKind.door:\n                    cell.asset = yield createAnimation({\n                        frameSize: { width: 100, height: 200 },\n                        assetPath: \"assets/door.png\",\n                        animationNames: [\"open\", \"close\"],\n                        idleAnimationName: \"open\",\n                        animationSettings: {\n                            \"*\": {\n                                animationSpeed: 0.1666,\n                                loop: false,\n                            },\n                        },\n                    });\n                    cell.properties = {\n                        open: false,\n                        toggle: () => {\n                            const door = cell;\n                            if (!door.properties.open) {\n                                door.properties.open = true;\n                                door.solid = false;\n                                door.asset.switchAnimation(\"open\");\n                                door.asset.play();\n                            }\n                            else if (door.properties.open) {\n                                door.properties.open = false;\n                                door.solid = true;\n                                door.asset.switchAnimation(\"close\");\n                                door.asset.play();\n                            }\n                        },\n                    };\n                    cell.asset.zIndex = cell.y;\n                    cell.asset.pivot.y = cell.asset.height / 2;\n                    break;\n            }\n            cell.asset.x = cell.x * cellSize;\n            cell.asset.y = cell.y * cellSize;\n        }\n        return cells;\n    });\n}\nfunction getSurroundingWalls(x, y, cells) {\n    const surroundingWalls = {\n        top: undefined,\n        bottom: undefined,\n        left: undefined,\n        right: undefined,\n        self: undefined,\n    };\n    cells.forEach((cell) => {\n        if (cell.kind !== CellKind.wall && cell.kind !== CellKind.door) {\n            return;\n        }\n        if (cell.x === x && cell.y === y) {\n            surroundingWalls.self = cell;\n        }\n        if (cell.x === x - 1 && cell.y === y) {\n            surroundingWalls.left = cell;\n        }\n        if (cell.x === x + 1 && cell.y === y) {\n            surroundingWalls.right = cell;\n        }\n        if (cell.x === x && cell.y === y - 1) {\n            surroundingWalls.top = cell;\n        }\n        if (cell.x === x && cell.y === y + 1) {\n            surroundingWalls.bottom = cell;\n        }\n    });\n    return surroundingWalls;\n}\nfunction findFloorType({ x, y }, cells) {\n    var _a, _b, _c, _d, _e;\n    const surroundingWalls = getSurroundingWalls(x, y, cells);\n    const topWallType = (_b = (_a = surroundingWalls.top) === null || _a === void 0 ? void 0 : _a.properties) === null || _b === void 0 ? void 0 : _b.wallType;\n    const selfWallType = (_d = (_c = surroundingWalls.self) === null || _c === void 0 ? void 0 : _c.properties) === null || _d === void 0 ? void 0 : _d.wallType;\n    if (((_e = surroundingWalls.self) === null || _e === void 0 ? void 0 : _e.kind) === CellKind.door ||\n        (selfWallType === null || selfWallType === void 0 ? void 0 : selfWallType.includes(\"window\"))) {\n        return \"floor\";\n    }\n    if (surroundingWalls.self) {\n        if (((topWallType === null || topWallType === void 0 ? void 0 : topWallType.includes(\"horizontal\")) || topWallType === \"vertical-T\") &&\n            topWallType !== \"horizontal-right-corner-bottom\") {\n            return \"floor-shadow-corner\";\n        }\n        else {\n            return \"floor-shadow-left\";\n        }\n    }\n    if (surroundingWalls.top &&\n        ((topWallType === null || topWallType === void 0 ? void 0 : topWallType.includes(\"horizontal\")) ||\n            surroundingWalls.top.kind === CellKind.door)) {\n        // special case for right-corner-top assets, we want a corner shadow\n        if (topWallType === \"horizontal-right-corner-top\") {\n            return \"floor-shadow-top-left\";\n        }\n        return \"floor-shadow-top\";\n    }\n    return \"floor\";\n}\nfunction findWallType({ x, y }, cells) {\n    var _a;\n    const surroundingWalls = getSurroundingWalls(x, y, cells);\n    // if there is a wall to the left or right, it's a horizontal wall\n    if (surroundingWalls.left && surroundingWalls.right) {\n        if (surroundingWalls.bottom) {\n            return \"horizontal-T\";\n        }\n        const leftWallType = (_a = surroundingWalls.left\n            .properties) === null || _a === void 0 ? void 0 : _a.wallType;\n        // if there is a window on the left, we must add the right part of that window\n        if (leftWallType === \"horizontal-window-left\") {\n            return \"horizontal-window-right\";\n        }\n        // check if there is a wall on the right of the right wall. If so, it's a long wall and we can add a window\n        const isLongWall = !!cells.find((c) => surroundingWalls.right.x + 1 === c.x &&\n            surroundingWalls.right.y === c.y &&\n            c.kind === CellKind.wall);\n        // add random chances to have a window on a long horizontal wall\n        if (surroundingWalls.right.kind === CellKind.wall &&\n            isLongWall &&\n            random(0, 3) === 0) {\n            return \"horizontal-window-left\";\n        }\n        return \"horizontal\";\n    }\n    if (surroundingWalls.top && surroundingWalls.bottom) {\n        if (surroundingWalls.right) {\n            return \"vertical-T\";\n        }\n        return \"vertical\";\n    }\n    // if only a wall on the left\n    if (surroundingWalls.left) {\n        if (surroundingWalls.bottom) {\n            return \"horizontal-right-corner-bottom\";\n        }\n        else if (surroundingWalls.top) {\n            return \"horizontal-right-corner-top\";\n        }\n        return \"horizontal-right\";\n    }\n    // if only a wall on the right\n    if (surroundingWalls.right) {\n        if (surroundingWalls.bottom) {\n            return \"horizontal-left-corner-bottom\";\n        }\n        else if (surroundingWalls.top) {\n            return \"horizontal-left-corner-top\";\n        }\n        return \"horizontal-left\";\n    }\n    // if only a wall on the top\n    if (surroundingWalls.top) {\n        return \"vertical-bottom\";\n    }\n    // if only a wall on the bottom\n    if (surroundingWalls.bottom) {\n        return \"vertical-top\";\n    }\n    // if no walls around, it's a pillar\n    return \"pillar\";\n}\n","import { random } from \"../utils/math\";\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"North\"] = 0] = \"North\";\n    Direction[Direction[\"East\"] = 1] = \"East\";\n    Direction[Direction[\"South\"] = 2] = \"South\";\n    Direction[Direction[\"West\"] = 3] = \"West\";\n})(Direction || (Direction = {}));\nconst minimumSharedWidth = 3;\nconst minimumSharedHeight = 3;\nfunction generateRooms(count) {\n    return Array.from({ length: count }).map(() => ({\n        x: 0,\n        y: 0,\n        width: random(5, 10),\n        height: random(5, 10),\n    }));\n}\nfunction getOuterMostRoom(rooms, direction) {\n    switch (direction) {\n        // most north\n        case Direction.North:\n            return rooms.reduce((prev, curr) => {\n                if (curr.y < prev.y) {\n                    return curr;\n                }\n                return prev;\n            });\n        // most east\n        case Direction.East:\n            return rooms.reduce((prev, curr) => {\n                if (curr.x > prev.x) {\n                    return curr;\n                }\n                return prev;\n            });\n        // most south\n        case Direction.South:\n            return rooms.reduce((prev, curr) => {\n                if (curr.y > prev.y) {\n                    return curr;\n                }\n                return prev;\n            });\n        // most west\n        case Direction.West:\n            return rooms.reduce((prev, curr) => {\n                if (curr.x < prev.x) {\n                    return curr;\n                }\n                return prev;\n            });\n    }\n}\n// Generate a random shared X coordinate between two rooms\nfunction getSharedX(room1, room2) {\n    return random(Math.max(room1.x + 1, room2.x + 1), // adding +1 since we need a wall on the left side\n    Math.min(room1.x + room1.width - 2, room2.x + room2.width - 2) // removing -2 since we need a wall on the right side and we need to also remove 1 from the width\n    );\n}\n// Generate a random shared X coordinate between two rooms\nfunction getSharedY(room1, room2) {\n    return random(Math.max(room1.y + 1, room2.y + 1), Math.min(room1.y + room1.height - 2, room2.y + room2.height - 2));\n}\nfunction moveRoom(room, direction, outerMostRoom) {\n    const distanceToOuterMostRoom = random(1, 2);\n    const shortestWidth = Math.min(room.width, outerMostRoom.width);\n    const shortestHeight = Math.min(room.height, outerMostRoom.height);\n    let sharedX, sharedY;\n    // random to decide where to offset the room based on the previous one\n    const roomOffsetDirection = random(0, 1) === 1 ? 1 : -1;\n    switch (direction) {\n        // north\n        case Direction.North:\n            // move the room to the top of the outerMostRoom\n            room.y = outerMostRoom.y - room.height - distanceToOuterMostRoom;\n            // Offset the room to the left or right of the outerMostRoom\n            room.x =\n                outerMostRoom.x +\n                    random(0, shortestWidth - minimumSharedWidth) * roomOffsetDirection;\n            sharedX = getSharedX(room, outerMostRoom);\n            // create a corridor from the bottom of this room to the top of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: sharedX,\n                    y: room.y + room.height - 1,\n                },\n                to: {\n                    x: sharedX,\n                    y: outerMostRoom.y,\n                },\n                direction,\n            };\n            break;\n        // east\n        case Direction.East:\n            room.x = outerMostRoom.x + outerMostRoom.width + distanceToOuterMostRoom;\n            room.y =\n                outerMostRoom.y +\n                    random(0, shortestHeight - minimumSharedHeight) * roomOffsetDirection;\n            sharedY = getSharedY(room, outerMostRoom);\n            // create a corridor from the left of this room to the right of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: room.x,\n                    y: sharedY,\n                },\n                to: {\n                    x: outerMostRoom.x + outerMostRoom.width - 1,\n                    y: sharedY,\n                },\n                direction,\n            };\n            break;\n        // south\n        case Direction.South:\n            room.y = outerMostRoom.y + outerMostRoom.height + distanceToOuterMostRoom;\n            room.x =\n                outerMostRoom.x +\n                    random(0, shortestWidth - minimumSharedWidth) * roomOffsetDirection;\n            sharedX = getSharedX(room, outerMostRoom);\n            // create a corridor from the top of this room to the bottom of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: sharedX,\n                    y: room.y,\n                },\n                to: {\n                    x: sharedX,\n                    y: outerMostRoom.y + outerMostRoom.height - 1,\n                },\n                direction,\n            };\n            break;\n        // west\n        case Direction.West:\n            room.x = outerMostRoom.x - room.width - distanceToOuterMostRoom;\n            room.y =\n                outerMostRoom.y +\n                    random(0, shortestHeight - minimumSharedHeight) * roomOffsetDirection;\n            sharedY = getSharedY(room, outerMostRoom);\n            // create a corridor from the right of this room to the left of the outerMostRoom\n            room.corridor = {\n                from: {\n                    x: room.x + room.width - 1,\n                    y: sharedY,\n                },\n                to: {\n                    x: outerMostRoom.x,\n                    y: sharedY,\n                },\n                direction,\n            };\n            break;\n    }\n}\nexport function generateMap() {\n    // start by generating many rooms with random sizes, but with more height than width\n    const rooms = generateRooms(20);\n    // then move them away from each other until none of them overlap and\n    // they are between 1 and 2 cells away from each other,\n    rooms.slice(1).forEach((room, index) => {\n        const direction = random(0, 3); // 0: north, 1: east, 2: south, 3: west\n        const outerMostRoom = index === 0 ? rooms[0] : getOuterMostRoom(rooms, direction);\n        moveRoom(room, direction, outerMostRoom);\n    });\n    // then connect them with corridors.\n    // convert the rooms to a raw-map of 0 and 1\n    const westMostRoom = getOuterMostRoom(rooms, Direction.West);\n    const northMostRoom = getOuterMostRoom(rooms, Direction.North);\n    const startX = westMostRoom.x;\n    const startY = northMostRoom.y;\n    const map = [];\n    rooms.forEach((room) => {\n        for (let y = 0; y < room.height; y++) {\n            for (let x = 0; x < room.width; x++) {\n                const isWall = x === 0 || x === room.width - 1 || y === 0 || y === room.height - 1;\n                const mapX = Math.abs(startX - (room.x + x));\n                const mapY = Math.abs(startY - (room.y + y));\n                if (map[mapY] === undefined) {\n                    map[mapY] = [];\n                }\n                map[mapY][mapX] = isWall ? 1 : 0;\n            }\n        }\n    });\n    // now add the corridors\n    rooms\n        .filter((room) => !!room.corridor)\n        .forEach((room) => {\n        const { from, to, direction } = room.corridor;\n        const corridorLength = direction === Direction.North || direction === Direction.South\n            ? Math.abs(from.y - to.y)\n            : Math.abs(from.x - to.x);\n        for (let i = 0; i <= corridorLength; i++) {\n            let mapX = Math.abs(startX - from.x);\n            let mapY = Math.abs(startY - from.y);\n            if (direction === Direction.North) {\n                mapY += i;\n            }\n            else if (direction === Direction.East) {\n                mapX -= i;\n            }\n            else if (direction === Direction.South) {\n                mapY -= i;\n            }\n            else if (direction === Direction.West) {\n                mapX += i;\n            }\n            if (map[mapY] === undefined) {\n                map[mapY] = [];\n            }\n            map[mapY][mapX] = 0;\n            // surround the corridor with walls\n            if (direction === Direction.North || direction === Direction.South) {\n                map[mapY][mapX - 1] = 1;\n                map[mapY][mapX + 1] = 1;\n            }\n            else if (direction === Direction.East ||\n                direction === Direction.West) {\n                if (map[mapY - 1] === undefined) {\n                    map[mapY - 1] = [];\n                }\n                if (map[mapY + 1] === undefined) {\n                    map[mapY + 1] = [];\n                }\n                map[mapY - 1][mapX] = 1;\n                map[mapY + 1][mapX] = 1;\n            }\n        }\n        // if we just added a vertical corridor, add a door as well\n        if (direction === Direction.North || direction === Direction.South) {\n            const doorX = Math.abs(startX - to.x);\n            const doorY = Math.abs(startY - to.y);\n            map[doorY][doorX] = 2;\n        }\n    });\n    return {\n        map,\n        startCoords: {\n            x: Math.abs(startX - (rooms[0].x + Math.floor(rooms[0].width / 2))),\n            y: Math.abs(startY - (rooms[0].y + Math.floor(rooms[0].height / 2))),\n        },\n    };\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Container } from \"pixi.js\";\nimport { cellSize } from \"../../constants\";\nimport { parseMap } from \"./parsing\";\nimport { generateMap } from \"./generation\";\nexport class Map {\n    constructor() {\n        this.container = new Container();\n        this.entities = [];\n        const { map, startCoords } = generateMap();\n        this.rawMap = map;\n        this.startLocation = startCoords;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.cells = yield parseMap(this.rawMap);\n            this.cells.forEach((cell) => this.container.addChild(cell.asset));\n            this.container.sortableChildren = true;\n        });\n    }\n    destroy() {\n        this.container.destroy();\n        this.entities.forEach((entity) => entity.destroy());\n    }\n    addEntity(entity) {\n        this.entities.push(entity);\n        this.container.addChild(entity);\n    }\n    getEntities() {\n        return this.entities;\n    }\n    getCell(x, y) {\n        const xCell = Math.round(x / cellSize);\n        const yCell = Math.round(y / cellSize);\n        return this.cells.find((c) => c.x === xCell && c.y === yCell);\n    }\n    getCells(x, y, radius) {\n        const cells = this.cells.filter((c) => c.x >= Math.round((x - radius) / cellSize) &&\n            c.x <= Math.round((x + radius) / cellSize) &&\n            c.y >= Math.round((y - radius) / cellSize) &&\n            c.y <= Math.round((y + radius) / cellSize));\n        return cells;\n    }\n}\n","class UIApi {\n    constructor() {\n        this.eventCounter = 0;\n    }\n    listen(callback) {\n        this.listener = callback;\n    }\n    /**\n     * Displays a dialog with the given message.\n     *\n     * @returns A function that can be called to close the dialog.\n     */\n    showDialog(content, options) {\n        var _a;\n        const id = (this.eventCounter++).toString();\n        (_a = this.listener) === null || _a === void 0 ? void 0 : _a.call(this, \"new\", {\n            id,\n            type: \"dialog\",\n            content,\n            options,\n        });\n        const dismiss = () => this.closeDialog(id);\n        if (options === null || options === void 0 ? void 0 : options.dismissTimeout) {\n            setTimeout(dismiss, options.dismissTimeout);\n        }\n        return dismiss;\n    }\n    closeDialog(id) {\n        var _a;\n        (_a = this.listener) === null || _a === void 0 ? void 0 : _a.call(this, \"delete\", { id });\n    }\n}\nexport const uiAPI = new UIApi();\n","import { cellSize, interactionRadius } from \"../constants\";\nimport { uiAPI } from \"../react-ui/UIApi\";\nimport { CellKind } from \"./types\";\n/**\n * Class taking care of user interactions,\n * such as movements and interactions with the environment.\n */\nexport class InteractionManager {\n    constructor(character, map, app) {\n        this.character = character;\n        this.map = map;\n        this.app = app;\n        this.pressedKeys = new Set();\n        this.checkForInteractions = () => {\n            var _a, _b;\n            const { x, y } = this.character;\n            const cells = this.map.getCells(x, y, interactionRadius);\n            // check for doors\n            const hasInteraction = cells.some((cell) => cell.kind === CellKind.door);\n            if (hasInteraction && !this.dialogDismiss) {\n                (_a = this.dialogDismiss) === null || _a === void 0 ? void 0 : _a.call(this);\n                this.dialogDismiss = uiAPI.showDialog({ key: \"E\", message: \"Interact\" }, { animation: \"fade\" });\n            }\n            else if (!hasInteraction) {\n                (_b = this.dialogDismiss) === null || _b === void 0 ? void 0 : _b.call(this);\n                this.dialogDismiss = undefined;\n            }\n        };\n        window.addEventListener(\"keydown\", this.onKeyDown.bind(this));\n        window.addEventListener(\"keyup\", this.onKeyUp.bind(this));\n        this.app.ticker.add(this.onTick.bind(this));\n    }\n    destroy() {\n        this.app.ticker.remove(this.onTick.bind(this));\n    }\n    onTick() {\n        this.checkForInteractions();\n    }\n    checkKeysPressed() {\n        const key = this.pressedKeys.values().next().value;\n        switch (key) {\n            case \"e\":\n                this.interact();\n                break;\n            case \"ArrowUp\":\n                this.character.walk(\"up\");\n                break;\n            case \"ArrowDown\":\n                this.character.walk(\"down\");\n                break;\n            case \"ArrowLeft\":\n                this.character.walk(\"left\");\n                break;\n            case \"ArrowRight\":\n                this.character.walk(\"right\");\n                break;\n            default:\n                this.character.stopWalking();\n                break;\n        }\n    }\n    interact() {\n        const { x, y } = this.character;\n        const cells = this.map.getCells(x, y, interactionRadius);\n        const door = cells.find((cell) => cell.kind === CellKind.door);\n        // open or close the door\n        if (door &&\n            // can't close the door if the player is in the way\n            !(door.x === Math.round(x / cellSize) &&\n                // add 20 of play to using the door from quite close\n                door.y === Math.round((y + 20) / cellSize))) {\n            door.properties.toggle();\n        }\n    }\n    onKeyDown(event) {\n        if (!event.key.includes(\"Arrow\") && event.key !== \"e\") {\n            return;\n        }\n        this.pressedKeys.add(event.key);\n        this.checkKeysPressed();\n    }\n    onKeyUp(event) {\n        this.pressedKeys.delete(event.key);\n        this.checkKeysPressed();\n    }\n}\n","export function distance(x1, y1, x2, y2) {\n    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n}\n","export function findPath(startCell, target, map, maxLength) {\n    const endCell = map.getCell(target.x - 1, target.y - 1);\n    function explore(toExplore, exploredMap) {\n        const cell = toExplore.pop();\n        if (!cell || exploredMap[cell.y][cell.x] > maxLength) {\n            return false;\n        }\n        const { x, y } = cell;\n        const previousCellValue = exploredMap[y][x];\n        // if target is found\n        if (endCell.x === x && endCell.y === y) {\n            return true;\n        }\n        const newCellValue = previousCellValue + 1;\n        if (newCellValue > maxLength) {\n            return explore(toExplore, exploredMap);\n        }\n        // explore top cell\n        if (y - 1 >= 0 && exploredMap[y - 1][x] === 0) {\n            exploredMap[y - 1][x] = newCellValue;\n            toExplore.push({ y: y - 1, x });\n        }\n        // explore bottom cell\n        if (y + 1 < exploredMap.length && exploredMap[y + 1][x] === 0) {\n            exploredMap[y + 1][x] = newCellValue;\n            toExplore.push({ y: y + 1, x });\n        }\n        // explore left cell\n        if (x - 1 >= 0 && exploredMap[y][x - 1] === 0) {\n            exploredMap[y][x - 1] = newCellValue;\n            toExplore.push({ y, x: x - 1 });\n        }\n        // explore right cell\n        if (x + 1 < exploredMap[y].length && exploredMap[y][x + 1] === 0) {\n            exploredMap[y][x + 1] = newCellValue;\n            toExplore.push({ y, x: x + 1 });\n        }\n        return explore(toExplore, exploredMap);\n    }\n    const exploredMap = [];\n    map.cells.forEach((cell) => {\n        if (!exploredMap[cell.y]) {\n            exploredMap[cell.y] = [];\n        }\n        if (exploredMap[cell.y][cell.x] === undefined) {\n            exploredMap[cell.y][cell.x] = cell.solid ? -1 : 0;\n        }\n    });\n    exploredMap[startCell.y][startCell.x] = 2; // start at 2\n    const found = explore([startCell], exploredMap);\n    if (!found) {\n        return [];\n    }\n    const path = [];\n    let x = endCell.x, y = endCell.y;\n    do {\n        path.unshift({ x, y });\n        // go left if the value is current - 1\n        if (x - 1 >= 0 && exploredMap[y][x - 1] === exploredMap[y][x] - 1) {\n            x--;\n        }\n        // go right if the value is current + 1\n        else if (x + 1 < exploredMap[y].length &&\n            exploredMap[y][x + 1] === exploredMap[y][x] - 1) {\n            x++;\n        }\n        // go up if the value is current + 1\n        else if (y - 1 >= 0 && exploredMap[y - 1][x] === exploredMap[y][x] - 1) {\n            y--;\n        }\n        // go down if the value is current + 1\n        else if (y + 1 < exploredMap.length &&\n            exploredMap[y + 1][x] === exploredMap[y][x] - 1) {\n            y++;\n        }\n        else {\n            break;\n        }\n        // eslint-disable-next-line no-constant-condition\n    } while (true);\n    return path;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Container } from \"pixi.js\";\nimport { createAnimation } from \"../sprites/createAnimation\";\nimport { distance } from \"../../utils/distance\";\nimport { findPath } from \"../../utils/pathFinding\";\nimport { cellSize } from \"../../constants\";\n/**\n * Base class for all enemies.\n */\nexport class Enemy extends Container {\n    constructor(map, app, speed, detectionRange = 200, hitRange = 50) {\n        super();\n        this.map = map;\n        this.app = app;\n        this.speed = speed;\n        this.detectionRange = detectionRange;\n        this.hitRange = hitRange;\n        this.kind = \"enemy\";\n        this.app.ticker.add(this.onTick.bind(this));\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.animation = yield createAnimation({\n                frameSize: { width: 100, height: 100 },\n                assetPath: \"assets/enemy-sprite.png\",\n                animationNames: [\n                    \"walk-down\",\n                    \"walk-up\",\n                    \"walk-left\",\n                    \"walk-right\",\n                    \"idle\",\n                ],\n                idleAnimationName: \"idle\",\n                animationSettings: {\n                    \"*\": {\n                        animationSpeed: 0.1666,\n                        loop: true,\n                        autoPlay: true,\n                    },\n                    idle: {\n                        autoPlay: true,\n                        animationSpeed: 0.0666,\n                    },\n                },\n                scale: \"1\",\n            });\n            this.addChild(this.animation);\n            // offset the animation to center it\n            // Since we change the scale of the character, we need to offset the animation,\n            // otherwise the character width won't be equal to cellSize\n            this.animation.x = (cellSize - this.width) / 2;\n            // initialize the character to be standing\n            this.stopWalking();\n        });\n    }\n    destroy() {\n        super.destroy();\n        this.app.ticker.remove(this.onTick.bind(this));\n    }\n    onTick() {\n        var _a;\n        // if there is path to visit, start walking\n        if (((_a = this.path) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            this.walkOnPath();\n        }\n        for (const entity of this.map.getEntities()) {\n            // close enough to do damage\n            const distanceToEntity = distance(this.x, this.y, entity.x, entity.y);\n            if (entity.kind === \"character\" && distanceToEntity < this.hitRange) {\n                // do something on hit\n            }\n            // close enough to start following\n            else if (entity.kind === \"character\" &&\n                distanceToEntity < this.detectionRange &&\n                // but not close enough to hit\n                distanceToEntity > this.hitRange &&\n                // and if the previous path is wrong (end of path is not the entity)\n                (!this.path ||\n                    this.path.length === 0 ||\n                    (this.path[this.path.length - 1].x !==\n                        Math.round(entity.x / cellSize) &&\n                        this.path[this.path.length - 1].y !==\n                            Math.round(entity.y / cellSize)))) {\n                const myCell = this.map.getCell(this.x - 1, this.y - 1);\n                this.path = findPath(myCell, entity, this.map, \n                /* maxLength */ distanceToEntity / cellSize + 4);\n                return;\n            }\n        }\n    }\n    walkOnPath() {\n        const currentPath = this.path[0];\n        const targetX = currentPath.x * cellSize;\n        const targetY = currentPath.y * cellSize;\n        const xDelta = targetX - this.x;\n        const yDelta = targetY - this.y;\n        const distanceToTarget = distance(this.x, this.y, targetX, targetY);\n        // Check which direction we are moving the most\n        if (Math.abs(xDelta) > Math.abs(yDelta)) {\n            xDelta > 0 ? this.walk(\"right\") : this.walk(\"left\");\n        }\n        else {\n            yDelta > 0 ? this.walk(\"down\") : this.walk(\"up\");\n        }\n        if (distanceToTarget < this.hitRange) {\n            this.x = targetX;\n            this.y = targetY;\n            this.path.shift();\n            this.stopWalking();\n        }\n        else {\n            this.x += (xDelta / distanceToTarget) * this.speed;\n            this.y += (yDelta / distanceToTarget) * this.speed;\n        }\n    }\n    walk(direction) {\n        // if we are already walking in this direction, do nothing\n        if (this.walkDirection === direction) {\n            return;\n        }\n        // start by stopping any current walking\n        this.stopWalking();\n        // update walking direction\n        this.walkDirection = direction;\n        // change animation to\n        this.animation.switchAnimation(`walk-${direction}`);\n    }\n    stopWalking() {\n        this.walkDirection = undefined;\n        // switch back to the idle animation\n        this.animation.switchAnimation(\"idle\");\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Application } from \"pixi.js\";\nimport { CRTFilter } from \"@pixi/filter-crt\";\nimport { Character } from \"./entities/character\";\nimport { Map } from \"./map/map\";\nimport { CRTFilterVignetting, cellSize } from \"../constants\";\nimport { InteractionManager } from \"./interactionManager\";\nimport { uiAPI } from \"../react-ui/UIApi\";\nimport { Enemy } from \"./entities/enemy\";\nexport const app = new Application({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    resizeTo: window,\n    backgroundColor: \"#000000\",\n});\nexport class GameCore {\n    constructor() {\n        // create the map\n        this.map = new Map();\n        app.stage.filterArea = app.screen;\n        const crtFilter = new CRTFilter({ vignetting: 1 });\n        app.stage.filters = [crtFilter];\n        // create an animation to make the vignetting effect\n        const interval = setInterval(() => {\n            crtFilter.vignetting -= 0.01;\n            if (crtFilter.vignetting < CRTFilterVignetting) {\n                clearInterval(interval);\n                uiAPI.showDialog({ message: \"Uh.. Where am I?\" }, { dismissTimeout: 2000, animation: \"text\" });\n            }\n        }, 50);\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // init the map\n            yield this.map.init();\n            // create and init the character\n            this.character = new Character(this.map, app);\n            yield this.character.init();\n            this.character.x = this.map.startLocation.x * cellSize;\n            this.character.y = this.map.startLocation.y * cellSize;\n            // add the character to the map\n            this.map.addEntity(this.character);\n            // create and init an enemy\n            const enemy = new Enemy(this.map, app, \n            /* speed */ 2, \n            /* detectionRange */ 300);\n            yield enemy.init();\n            // offset slightly the enemy to the character start\n            enemy.x = this.map.startLocation.x * cellSize;\n            enemy.y = this.map.startLocation.y * cellSize;\n            // add the character to the map\n            this.map.addEntity(enemy);\n            const screenCenter = {\n                x: app.view.width / 2,\n                y: app.view.height / 2,\n            };\n            // center the map on the character\n            this.map.container.x = screenCenter.x - this.character.x;\n            this.map.container.y = screenCenter.y - this.character.y;\n            // add the map to the stage.\n            app.stage.addChild(this.map.container);\n            // create the interaction manager\n            this.interactionManager = new InteractionManager(this.character, this.map, app);\n        });\n    }\n    destroy() {\n        this.interactionManager.destroy();\n        this.map.destroy();\n    }\n}\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./UIController.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./UIController.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./Dialog.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./Dialog.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import * as React from \"react\";\nimport \"./UIController.module.css\";\nimport { uiAPI } from \"./UIApi\";\nimport { Dialog } from \"./components/Dialog\";\nconst componentMap = {\n    dialog: Dialog,\n};\nexport function UIController() {\n    const [activeElements, setActiveElements] = React.useState([]);\n    React.useEffect(() => {\n        uiAPI.listen((event, data) => {\n            switch (event) {\n                case \"new\":\n                    setActiveElements((prev) => [...prev, data]);\n                    break;\n                case \"delete\":\n                    setActiveElements((prev) => prev.filter((element) => element.id !== data.id));\n            }\n        });\n    }, [uiAPI]);\n    return (React.createElement(\"div\", { className: \"ui-controller\" }, activeElements.map((element) => {\n        const Component = componentMap[element.type];\n        return React.createElement(Component, Object.assign({ key: element.id }, element));\n    })));\n}\n","import * as React from \"react\";\nimport \"./Dialog.module.css\";\nexport function Dialog({ content, options }) {\n    return (React.createElement(\"div\", { className: `dialog ${(options === null || options === void 0 ? void 0 : options.animation) === \"fade\" ? \"dialog-animation-fade\" : \"\"}` },\n        content.key && React.createElement(\"kbd\", { className: \"dialog-key\" }, content.key),\n        React.createElement(\"div\", { className: `dialog-content ${(options === null || options === void 0 ? void 0 : options.animation) === \"text\" ? \"dialog-animation-text\" : \"\"}` }, content.message)));\n}\n","import * as React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { App } from \"./App\";\ncreateRoot(document.getElementById(\"root\")).render(React.createElement(App, null));\n","import * as React from \"react\";\nimport \"./App.module.css\";\nimport { GameCore, app } from \"./core/core\";\nimport { UIController } from \"./react-ui/UIController\";\nexport function App() {\n    React.useEffect(() => {\n        // The application will create a canvas element for you that you\n        // can then insert into the DOM\n        const wrapper = document.createElement(\"div\");\n        wrapper.className = \"game-canvas\";\n        wrapper.appendChild(app.view);\n        document.body.appendChild(wrapper);\n        const controller = new GameCore();\n        controller.init();\n        return controller.destroy;\n    }, []);\n    return React.createElement(UIController, null);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb_app\"] = self[\"webpackChunkweb_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [814], () => (__webpack_require__(354)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","___CSS_LOADER_EXPORT___","push","module","id","locals","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","createAnimation","frameSize","animationNames","assetPath","idleAnimationName","animationSettings","scale","thisArg","this","_arguments","generator","frames","map","animationName","vIndex","i","frame","x","width","y","height","w","h","sourceSize","createFramesForAnimation","spriteData","Object","assign","meta","animations","reduce","acc","animationFrames","keys","spriteSheet","from","parse","animation","switchAnimation","children","length","removeChildAt","animatedSprite","addChild","autoPlay","play","_a","P","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","cellSize","CellKind","Character","constructor","app","super","kind","zIndex","speed","init","animationSpeed","loop","idle","stopWalking","ticker","add","onTick","bind","destroy","remove","delta","walkDirection","move","xDelta","yDelta","newPlayerCoords","collidesWithWall","Math","round","container","isBetweenVerticalCells","floor","isBetweenHorizontalCells","cellsToCheck","ceil","some","coords","cell","cells","find","solid","wall","properties","wallType","includes","walk","direction","undefined","random","min","max","Direction","getSurroundingWalls","surroundingWalls","top","bottom","left","right","self","forEach","door","findFloorType","_b","_c","_d","_e","topWallType","selfWallType","findWallType","isLongWall","c","getOuterMostRoom","rooms","North","prev","curr","East","South","West","getSharedX","room1","room2","getSharedY","Map","entities","startCoords","Array","slice","room","index","outerMostRoom","distanceToOuterMostRoom","shortestWidth","shortestHeight","sharedX","sharedY","roomOffsetDirection","corridor","to","moveRoom","westMostRoom","northMostRoom","startX","startY","isWall","mapX","abs","mapY","filter","corridorLength","doorX","doorY","generateMap","rawMap","startLocation","row","asset","anchor","floorType","open","toggle","pivot","parseMap","sortableChildren","entity","addEntity","getEntities","getCell","xCell","yCell","getCells","radius","uiAPI","eventCounter","listen","callback","listener","showDialog","content","toString","call","type","dismiss","closeDialog","dismissTimeout","setTimeout","InteractionManager","character","pressedKeys","Set","checkForInteractions","hasInteraction","dialogDismiss","key","message","window","addEventListener","onKeyDown","onKeyUp","checkKeysPressed","values","interact","event","delete","distance","x1","y1","x2","y2","sqrt","pow","findPath","startCell","target","maxLength","endCell","exploredMap","found","explore","toExplore","pop","previousCellValue","newCellValue","path","unshift","Enemy","detectionRange","hitRange","walkOnPath","distanceToEntity","myCell","currentPath","targetX","targetY","distanceToTarget","shift","innerWidth","innerHeight","resizeTo","backgroundColor","GameCore","stage","filterArea","screen","crtFilter","vignetting","filters","interval","setInterval","clearInterval","enemy","screenCenter","view","interactionManager","componentMap","dialog","className","UIController","activeElements","setActiveElements","data","element","Component","document","getElementById","render","wrapper","createElement","appendChild","body","controller","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","nc","__webpack_exports__"],"sourceRoot":""}